[
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5248",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5248/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5248/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5248/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/5248",
        "id": 2320574109,
        "node_id": "I_kwDOBa1eV86KUSad",
        "number": 5248,
        "title": "Stuck on `java.util.concurrent.Future#get(long, java.util.concurrent.TimeUnit)` when using `java.util.concurrent.Executors#newVirtualThreadPerTaskExecutor`",
        "user": {
            "login": "ashr123",
            "id": 26481657,
            "node_id": "MDQ6VXNlcjI2NDgxNjU3",
            "avatar_url": "https://avatars.githubusercontent.com/u/26481657?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ashr123",
            "html_url": "https://github.com/ashr123",
            "followers_url": "https://api.github.com/users/ashr123/followers",
            "following_url": "https://api.github.com/users/ashr123/following{/other_user}",
            "gists_url": "https://api.github.com/users/ashr123/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/ashr123/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ashr123/subscriptions",
            "organizations_url": "https://api.github.com/users/ashr123/orgs",
            "repos_url": "https://api.github.com/users/ashr123/repos",
            "events_url": "https://api.github.com/users/ashr123/events{/privacy}",
            "received_events_url": "https://api.github.com/users/ashr123/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 1871569111,
                "node_id": "MDU6TGFiZWwxODcxNTY5MTEx",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/needs-triage",
                "name": "needs-triage",
                "color": "c7cafc",
                "default": false,
                "description": "This issue or PR still needs to be triaged."
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2024-05-28T09:28:34Z",
        "updated_at": "2024-06-05T11:21:38Z",
        "closed_at": "2024-06-05T11:21:23Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\r\n\r\nWhen using `java.util.concurrent.Executors#newVirtualThreadPerTaskExecutor` & `java.util.concurrent.ExecutorService#invokeAll(java.util.Collection<? extends java.util.concurrent.Callable<T>>, long, java.util.concurrent.TimeUnit)` & inside the `Callable` I call `software.amazon.awssdk.enhanced.dynamodb.DynamoDbTable#getItem(software.amazon.awssdk.enhanced.dynamodb.Key)`, the code doesn't return from the `getItem` method, in addition, the `Future#get` doesn't return either from cancelation or timeout\r\n\r\n### Expected Behavior\r\n\r\nReturn normally or return exceptionally with `CancelationException` or `TimeoutException`\r\n\r\n### Current Behavior\r\n\r\nSee bug desctiption\r\n\r\n### Reproduction Steps\r\n\r\n```java\r\nfinal DynamoDbTable<EnhancedDocument> table = DynamoDbEnhancedClient.create()\r\n        .table(\r\n                \"<table-name>\",\r\n                TableSchema.documentSchemaBuilder()\r\n                        .addIndexPartitionKey(TableMetadata.primaryIndexName(), \"<primary partition key>\", AttributeValueType.N)\r\n                        .addIndexSortKey(TableMetadata.primaryIndexName(), \"<primary sorting key>\", AttributeValueType.S)\r\n                        .build()\r\n        );\r\n\r\ntry (ExecutorService executorService = Executors.newVirtualThreadPerTaskExecutor()) {\r\n    final List<Future<EnhancedDocument>> futures = executorService.invokeAll(\r\n            List.of(() -> table.getItem(Key.builder()\r\n                    .partitionValue(123)\r\n                    .sortValue(\"456\")\r\n                    .build())),\r\n            5,\r\n            TimeUnit.SECONDS\r\n    );\r\n    System.out.println(futures.getFirst().get());\r\n} catch (ExecutionException | InterruptedException e) {\r\n    throw new RuntimeException(e);\r\n}\r\n```\r\n\r\nBut, when using `Executors.newThreadPerTaskExecutor(Thread.ofPlatform().factory())`, this doesn't happen, in addition, when deploying our code to production (using virtual threads), on Ubuntu Server 22.04 EC2s, this doesn't happen either.\r\n\r\n### Possible Solution\r\n\r\n_No response_\r\n\r\n### Additional Information/Context\r\n\r\n_No response_\r\n\r\n### AWS Java SDK version used\r\n\r\n2.20.157\r\n\r\n### JDK version used\r\n\r\n> openjdk 21.0.3 2024-04-16 LTS\r\n> OpenJDK Runtime Environment Corretto-21.0.3.9.1 (build 21.0.3+9-LTS)\r\n> OpenJDK 64-Bit Server VM Corretto-21.0.3.9.1 (build 21.0.3+9-LTS, mixed mode, sharing)\r\n\r\n### Operating System and version\r\n\r\nMacOS 14.4.1",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5248/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5248/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5240",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5240/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5240/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5240/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/5240",
        "id": 2310401794,
        "node_id": "I_kwDOBa1eV86Jte8C",
        "number": 5240,
        "title": "Getting occasional Crc32MismatchException using DynamoDbClient",
        "user": {
            "login": "dev-k13",
            "id": 170526744,
            "node_id": "U_kgDOCioIGA",
            "avatar_url": "https://avatars.githubusercontent.com/u/170526744?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dev-k13",
            "html_url": "https://github.com/dev-k13",
            "followers_url": "https://api.github.com/users/dev-k13/followers",
            "following_url": "https://api.github.com/users/dev-k13/following{/other_user}",
            "gists_url": "https://api.github.com/users/dev-k13/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dev-k13/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dev-k13/subscriptions",
            "organizations_url": "https://api.github.com/users/dev-k13/orgs",
            "repos_url": "https://api.github.com/users/dev-k13/repos",
            "events_url": "https://api.github.com/users/dev-k13/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dev-k13/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 1326720996,
                "node_id": "MDU6TGFiZWwxMzI2NzIwOTk2",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/closing-soon",
                "name": "closing-soon",
                "color": "000000",
                "default": false,
                "description": "This issue will close in 4 days unless further comments are made."
            },
            {
                "id": 4731219696,
                "node_id": "LA_kwDOBa1eV88AAAABGgCu8A",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/p2",
                "name": "p2",
                "color": "FF8C00",
                "default": false,
                "description": "This is a standard priority issue"
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "debora-ito",
            "id": 476307,
            "node_id": "MDQ6VXNlcjQ3NjMwNw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/476307?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/debora-ito",
            "html_url": "https://github.com/debora-ito",
            "followers_url": "https://api.github.com/users/debora-ito/followers",
            "following_url": "https://api.github.com/users/debora-ito/following{/other_user}",
            "gists_url": "https://api.github.com/users/debora-ito/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/debora-ito/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/debora-ito/subscriptions",
            "organizations_url": "https://api.github.com/users/debora-ito/orgs",
            "repos_url": "https://api.github.com/users/debora-ito/repos",
            "events_url": "https://api.github.com/users/debora-ito/events{/privacy}",
            "received_events_url": "https://api.github.com/users/debora-ito/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "debora-ito",
                "id": 476307,
                "node_id": "MDQ6VXNlcjQ3NjMwNw==",
                "avatar_url": "https://avatars.githubusercontent.com/u/476307?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/debora-ito",
                "html_url": "https://github.com/debora-ito",
                "followers_url": "https://api.github.com/users/debora-ito/followers",
                "following_url": "https://api.github.com/users/debora-ito/following{/other_user}",
                "gists_url": "https://api.github.com/users/debora-ito/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/debora-ito/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/debora-ito/subscriptions",
                "organizations_url": "https://api.github.com/users/debora-ito/orgs",
                "repos_url": "https://api.github.com/users/debora-ito/repos",
                "events_url": "https://api.github.com/users/debora-ito/events{/privacy}",
                "received_events_url": "https://api.github.com/users/debora-ito/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 5,
        "created_at": "2024-05-22T12:24:43Z",
        "updated_at": "2024-05-29T03:30:16Z",
        "closed_at": "2024-05-29T03:29:58Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\r\n\r\nWe are getting Crc32MismatchException when doing a query to DynamoDB from our application. Happened only on few occasions but most of the time it is working fine.\r\n\r\nOn the two instances that this exception occurred, application was only retrieving 14596 bytes and 224264 bytes. For the instance that was reading 14596 bytes, read was successful after performing a retry.\r\n\r\n### Expected Behavior\r\n\r\nQuery from DynamoDB without getting checksum validation error.\r\n\r\n### Current Behavior\r\n\r\n\r\n```\r\nsoftware.amazon.awssdk.core.exception.Crc32MismatchException: Expected 2932621229 as the Crc32 checksum but the actual calculated checksum was 750835520\r\n\tat software.amazon.awssdk.core.exception.Crc32MismatchException$BuilderImpl.build(Crc32MismatchException.java:97)\r\n\tat software.amazon.awssdk.core.internal.util.Crc32ChecksumValidatingInputStream.validateChecksum(Crc32ChecksumValidatingInputStream.java:62)\r\n\tat software.amazon.awssdk.core.internal.util.Crc32ChecksumValidatingInputStream.close(Crc32ChecksumValidatingInputStream.java:50)\r\n\tat java.base/java.io.FilterInputStream.close(FilterInputStream.java:179)\r\n\tat software.amazon.awssdk.utils.FunctionalUtils.lambda$safeRunnable$5(FunctionalUtils.java:124)\r\n\tat software.amazon.awssdk.utils.FunctionalUtils.invokeSafely(FunctionalUtils.java:140)\r\n\tat software.amazon.awssdk.protocols.json.internal.unmarshall.JsonResponseHandler.lambda$handle$2(JsonResponseHandler.java:87)\r\n\tat java.base/java.util.Optional.ifPresent(Optional.java:178)\r\n\tat software.amazon.awssdk.protocols.json.internal.unmarshall.JsonResponseHandler.handle(JsonResponseHandler.java:87)\r\n\tat software.amazon.awssdk.protocols.json.internal.unmarshall.JsonResponseHandler.handle(JsonResponseHandler.java:36)\r\n\tat software.amazon.awssdk.protocols.json.internal.unmarshall.AwsJsonResponseHandler.handle(AwsJsonResponseHandler.java:43)\r\n\tat software.amazon.awssdk.core.http.MetricCollectingHttpResponseHandler.lambda$handle$0(MetricCollectingHttpResponseHandler.java:52)\r\n\tat software.amazon.awssdk.core.internal.util.MetricUtils.measureDurationUnsafe(MetricUtils.java:63)\r\n\tat software.amazon.awssdk.core.http.MetricCollectingHttpResponseHandler.handle(MetricCollectingHttpResponseHandler.java:52)\r\n\tat software.amazon.awssdk.awscore.client.handler.AwsSyncClientHandler$Crc32ValidationResponseHandler.handle(AwsSyncClientHandler.java:95)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseClientHandler.lambda$resultTransformationResponseHandler$8(BaseClientHandler.java:283)\r\n\tat software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handleSuccessResponse(CombinedResponseHandler.java:99)\r\n\tat software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handleResponse(CombinedResponseHandler.java:75)\r\n\tat software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handle(CombinedResponseHandler.java:60)\r\n\tat software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handle(CombinedResponseHandler.java:41)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.HandleResponseStage.execute(HandleResponseStage.java:40)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.HandleResponseStage.execute(HandleResponseStage.java:30)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:73)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:42)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:78)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:40)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:50)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:36)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage.execute(RetryableStage.java:81)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage.execute(RetryableStage.java:36)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipe\r\n```\r\n\r\n### Reproduction Steps\r\n\r\n\r\n```\r\nDynamoDbClient dynamoDbClient = DynamoDbClient.builder().httpClientBuilder(ApacheHttpClient.builder()).build();\r\n\r\nQueryRequest queryRequest = QueryRequest.builder()\r\n\t\t\t                .tableName(tableName)\r\n\t\t\t                .keyConditionExpression(keyConditionExpression)\r\n\t\t\t                .expressionAttributeNames(expressionAttributeNames)\r\n\t\t\t                .expressionAttributeValues(expressionAttributeValues)\r\n\t\t\t                .exclusiveStartKey(lastKeyEvaluated)\r\n\t\t\t                .build();\r\n\r\nQueryResponse response = dynamoDbClient.query(queryRequest);\r\n```\r\n\r\n### Possible Solution\r\n\r\n_No response_\r\n\r\n### Additional Information/Context\r\n\r\n_No response_\r\n\r\n### AWS Java SDK version used\r\n\r\n2.19.17\r\n\r\n### JDK version used\r\n\r\n17\r\n\r\n### Operating System and version\r\n\r\nAmazon Linux",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5240/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5240/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5157",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5157/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5157/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5157/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/5157",
        "id": 2266198399,
        "node_id": "I_kwDOBa1eV86HE3F_",
        "number": 5157,
        "title": "AWS Inspector client does not build the request correctly",
        "user": {
            "login": "javaduke",
            "id": 561559,
            "node_id": "MDQ6VXNlcjU2MTU1OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/561559?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/javaduke",
            "html_url": "https://github.com/javaduke",
            "followers_url": "https://api.github.com/users/javaduke/followers",
            "following_url": "https://api.github.com/users/javaduke/following{/other_user}",
            "gists_url": "https://api.github.com/users/javaduke/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/javaduke/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/javaduke/subscriptions",
            "organizations_url": "https://api.github.com/users/javaduke/orgs",
            "repos_url": "https://api.github.com/users/javaduke/repos",
            "events_url": "https://api.github.com/users/javaduke/events{/privacy}",
            "received_events_url": "https://api.github.com/users/javaduke/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 1871569111,
                "node_id": "MDU6TGFiZWwxODcxNTY5MTEx",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/needs-triage",
                "name": "needs-triage",
                "color": "c7cafc",
                "default": false,
                "description": "This issue or PR still needs to be triaged."
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2024-04-26T17:22:19Z",
        "updated_at": "2024-04-29T14:39:56Z",
        "closed_at": "2024-04-29T14:39:38Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\n\nMy test code is very simple:\r\n```\r\nInspectorClient inspectorClient = InspectorClient.builder()\r\n                .region(Region.US_WEST_2)\r\n                .httpClientBuilder(\r\n                    ApacheHttpClient.builder()\r\n                )\r\n                .build();\r\n\r\n        ListFindingsRequest request = ListFindingsRequest.builder().build();\r\n        ListFindingsResponse response = inspectorClient.listFindings(request);\r\n```\r\nWhen I run it, it returns no errors, bu the list of ARNs is empty. It does return pagination token though. I enabled HTTP wire logging to see what actually gets sent to the AWS and found that it sends an empty HTTTP POST request to the / URI and the response is 200 with empty body. Here's what it looks like:\r\n```\r\nsoftware.amazon.awssdk.request: Sending Request: DefaultSdkHttpFullRequest(httpMethod=POST, protocol=https, host=inspector.us-west-2.amazonaws.com, encodedPath=/, headers=[amz-sdk-invocation-id, Content-Length, Content-Type, User-Agent, X-Amz-Target], queryParameters=[])    \r\nDEBUG org.apache.http.client.protocol.RequestAddCookies: CookieSpec selected: default    \r\nDEBUG org.apache.http.client.protocol.RequestAuthCache: Auth cache not set in the context    \r\nDEBUG org.apache.http.wire: http-outgoing-0 >> \"POST / HTTP/1.1[\\r][\\n]\"    \r\nDEBUG org.apache.http.wire: http-outgoing-0 >> \"Host: inspector.us-west-2.amazonaws.com[\\r][\\n]\"    \r\nDEBUG org.apache.http.wire: http-outgoing-0 >> \"amz-sdk-invocation-id: e7f4d1b1-93cb-b4d4-fbac-6435d97e7501[\\r][\\n]\"    \r\nDEBUG org.apache.http.wire: http-outgoing-0 >> \"amz-sdk-request: attempt=1; max=4[\\r][\\n]\"    \r\nDEBUG org.apache.http.wire: http-outgoing-0 >> \"Authorization: xxxxx[\\r][\\n]\"    \r\nDEBUG org.apache.http.wire: http-outgoing-0 >> \"User-Agent: aws-sdk-java/2.24.9 Mac_OS_X/14.4.1 Java_HotSpot_TM__64-Bit_Server_VM/21.0.1+12-jvmci-23.1-b19 Java/21.0.1 scala/2.13.13 vendor/Oracle_Corporation io/sync http/Apache cfg/retry-mode/legacy[\\r][\\n]\"    \r\nDEBUG org.apache.http.wire: http-outgoing-0 >> \"x-amz-content-sha256: 44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a[\\r][\\n]\"    \r\nDEBUG org.apache.http.wire: http-outgoing-0 >> \"X-Amz-Date: 20240426T171534Z[\\r][\\n]\"    \r\nDEBUG org.apache.http.wire: http-outgoing-0 >> \"X-Amz-Target: InspectorService.ListFindings[\\r][\\n]\"    \r\nDEBUG org.apache.http.wire: http-outgoing-0 >> \"Content-Length: 2[\\r][\\n]\"    \r\nDEBUG org.apache.http.wire: http-outgoing-0 >> \"Connection: Keep-Alive[\\r][\\n]\"    \r\nDEBUG org.apache.http.wire: http-outgoing-0 >> \"[\\r][\\n]\"    \r\nDEBUG org.apache.http.wire: http-outgoing-0 >> \"{}\"    \r\nDEBUG org.apache.http.wire: http-outgoing-0 << \"HTTP/1.1 200 OK[\\r][\\n]\"    \r\nDEBUG org.apache.http.wire: http-outgoing-0 << \"x-amzn-RequestId: 08cbf55c-7ea2-4d10-aa77-c19d93b5bac9[\\r][\\n]\"    \r\nDEBUG org.apache.http.wire: http-outgoing-0 << \"Content-Type: application/x-amz-json-1.1[\\r][\\n]\"    \r\nDEBUG org.apache.http.wire: http-outgoing-0 << \"Content-Length: 141[\\r][\\n]\"    \r\nDEBUG org.apache.http.wire: http-outgoing-0 << \"Date: Fri, 26 Apr 2024 17:15:34 GMT[\\r][\\n]\"    \r\nDEBUG org.apache.http.wire: http-outgoing-0 << \"[\\r][\\n]\"    \r\nDEBUG software.amazon.awssdk.request: Received successful response: 200, Request ID: 08cbf55c-7ea2-4d10-aa77-c19d93b5bac9, Extended Request ID: not available    \r\nDEBUG org.apache.http.wire: http-outgoing-0 << \"{\"findingArns\":[],\"nextToken\":\"AAIAAWWZlFboDDHZ0M4iqcEvTrRoQCk1rhPwNfQYIiVPIjXpqWVNuwxopbSUUMHzSGdcWEtccHtfl4OWQBxI820saB7_iBKNot1hp76WUQ==\"}\"    \r\n```\n\n### Expected Behavior\n\nI expected the call to return list of ARNs.\n\n### Current Behavior\n\nThe list of ARNs is empty.\n\n### Reproduction Steps\n\n```\r\nInspectorClient inspectorClient = InspectorClient.builder()\r\n                .credentialsProvider(portXAWSCredentialsProvider)\r\n                .region(Region.US_WEST_2)\r\n                .httpClientBuilder(\r\n                    ApacheHttpClient.builder()\r\n                )\r\n                .build();\r\n\r\nListFindingsRequest request = ListFindingsRequest.builder().build();\r\nListFindingsResponse response = inspectorClient.listFindings(request);\r\n```\n\n### Possible Solution\n\n_No response_\n\n### Additional Information/Context\n\n_No response_\n\n### AWS Java SDK version used\n\n2.25.38\n\n### JDK version used\n\njava version \"21.0.1\" 2023-10-17 Java(TM) SE Runtime Environment Oracle GraalVM 21.0.1+12.1 (build 21.0.1+12-jvmci-23.1-b19) Java HotSpot(TM) 64-Bit Server VM Oracle GraalVM 21.0.1+12.1 (build 21.0.1+12-jvmci-23.1-b19, mixed mode, sharing)\n\n### Operating System and version\n\nmacOS 14.4.1",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5157/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5157/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5134",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5134/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5134/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5134/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/5134",
        "id": 2257683056,
        "node_id": "I_kwDOBa1eV86GkYJw",
        "number": 5134,
        "title": "CognitoIdentityProviderClient.adminInitiateAuth is consistently failing. What is missing?",
        "user": {
            "login": "ipsi-apant",
            "id": 127072273,
            "node_id": "U_kgDOB5L4EQ",
            "avatar_url": "https://avatars.githubusercontent.com/u/127072273?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ipsi-apant",
            "html_url": "https://github.com/ipsi-apant",
            "followers_url": "https://api.github.com/users/ipsi-apant/followers",
            "following_url": "https://api.github.com/users/ipsi-apant/following{/other_user}",
            "gists_url": "https://api.github.com/users/ipsi-apant/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/ipsi-apant/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ipsi-apant/subscriptions",
            "organizations_url": "https://api.github.com/users/ipsi-apant/orgs",
            "repos_url": "https://api.github.com/users/ipsi-apant/repos",
            "events_url": "https://api.github.com/users/ipsi-apant/events{/privacy}",
            "received_events_url": "https://api.github.com/users/ipsi-apant/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 1326720996,
                "node_id": "MDU6TGFiZWwxMzI2NzIwOTk2",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/closing-soon",
                "name": "closing-soon",
                "color": "000000",
                "default": false,
                "description": "This issue will close in 4 days unless further comments are made."
            },
            {
                "id": 1326720998,
                "node_id": "MDU6TGFiZWwxMzI2NzIwOTk4",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/guidance",
                "name": "guidance",
                "color": "8a19e7",
                "default": false,
                "description": "Question that needs advice or information."
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "bhoradc",
            "id": 122290643,
            "node_id": "U_kgDOB0oB0w",
            "avatar_url": "https://avatars.githubusercontent.com/u/122290643?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/bhoradc",
            "html_url": "https://github.com/bhoradc",
            "followers_url": "https://api.github.com/users/bhoradc/followers",
            "following_url": "https://api.github.com/users/bhoradc/following{/other_user}",
            "gists_url": "https://api.github.com/users/bhoradc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/bhoradc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/bhoradc/subscriptions",
            "organizations_url": "https://api.github.com/users/bhoradc/orgs",
            "repos_url": "https://api.github.com/users/bhoradc/repos",
            "events_url": "https://api.github.com/users/bhoradc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/bhoradc/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "bhoradc",
                "id": 122290643,
                "node_id": "U_kgDOB0oB0w",
                "avatar_url": "https://avatars.githubusercontent.com/u/122290643?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/bhoradc",
                "html_url": "https://github.com/bhoradc",
                "followers_url": "https://api.github.com/users/bhoradc/followers",
                "following_url": "https://api.github.com/users/bhoradc/following{/other_user}",
                "gists_url": "https://api.github.com/users/bhoradc/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/bhoradc/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bhoradc/subscriptions",
                "organizations_url": "https://api.github.com/users/bhoradc/orgs",
                "repos_url": "https://api.github.com/users/bhoradc/repos",
                "events_url": "https://api.github.com/users/bhoradc/events{/privacy}",
                "received_events_url": "https://api.github.com/users/bhoradc/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 6,
        "created_at": "2024-04-23T00:29:12Z",
        "updated_at": "2024-05-21T22:52:10Z",
        "closed_at": "2024-05-21T22:51:53Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\n\nI have created a Cognito user pool. Added two app clients. One having secret another without secret. Also, added a user to the pool. The documents I am referring mentioned in the `Additional Information/Context`\r\n\r\n### Use case\r\nWe are planning to integrate Cognito for backend app as auth mechanism. The request contains username/password (due to backward compatibility for legacy systems). Based on the username/password we need to generate an access token using Cognito APIs.\r\n\r\n### Behavior\r\nIn the following code sample `listUsers` function is working. However, call to `adminInitiateAuth` always return `null` response.\r\n\r\n### Error\r\n`java.lang.NullPointerException: Cannot invoke \"software.amazon.awssdk.services.cognitoidentityprovider.model.AuthenticationResultType.accessToken()\" because the return value of \"software.amazon.awssdk.services.cognitoidentityprovider.model.AdminInitiateAuthResponse.authenticationResult()\" is null`\r\n\r\n\r\n### Code sample\r\n```java\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport java.util.Optional;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.apache.commons.lang3.StringUtils;\r\nimport software.amazon.awssdk.regions.Region;\r\nimport software.amazon.awssdk.services.cognitoidentityprovider.CognitoIdentityProviderClient;\r\nimport software.amazon.awssdk.services.cognitoidentityprovider.model.AdminInitiateAuthRequest;\r\nimport software.amazon.awssdk.services.cognitoidentityprovider.model.AdminInitiateAuthResponse;\r\nimport software.amazon.awssdk.services.cognitoidentityprovider.model.AuthFlowType;\r\nimport software.amazon.awssdk.services.cognitoidentityprovider.model.CognitoIdentityProviderException;\r\nimport software.amazon.awssdk.services.cognitoidentityprovider.model.ListUsersRequest;\r\n\r\n@Slf4j\r\npublic class CognitoPoc {\r\n\r\n  private static final String userPool = \"ap-southeast-2_mypoolid\";\r\n\r\n  public void adminAuth(Map<String, String> params) {\r\n\r\n    try (CognitoIdentityProviderClient cognitoClient = CognitoIdentityProviderClient.builder()\r\n                                                                                    .region(Region.AP_SOUTHEAST_2)\r\n                                                                                    .build()) {\r\n\r\n      listUsers(cognitoClient); // this works\r\n\r\n      log.info(\"----------------------------------------\");\r\n\r\n      log.info(\"CognitoPoc.adminAuth: Access token for user\");\r\n\r\n      adminUserPasswordAuth(cognitoClient, params);\r\n    }\r\n\r\n  }\r\n\r\n  private void adminUserPasswordAuth(CognitoIdentityProviderClient cognitoClient,\r\n                                     Map<String, String> params) {\r\n    try {\r\n      log.info(\"Access token by ADMIN_USER_PASSWORD_AUTH flow\");\r\n\r\n      String username = params.get(\"username\");\r\n      String password = params.get(\"password\");\r\n      String clientId = params.get(\"clientId\");\r\n      String secret = params.get(\"secret\");\r\n\r\n      Map<String, String> authParameters = new HashMap<>();\r\n      authParameters.put(\"USERNAME\", username);\r\n      authParameters.put(\"PASSWORD\", password);\r\n      Optional.ofNullable(secret)\r\n              .ifPresent(hash -> authParameters.put(\"SECRET_HASH\", hash));\r\n\r\n      AdminInitiateAuthRequest authRequest = AdminInitiateAuthRequest\r\n          .builder()\r\n          .clientId(clientId)\r\n          .userPoolId(userPool)\r\n          .authParameters(authParameters)\r\n          .authFlow(AuthFlowType.ADMIN_USER_PASSWORD_AUTH)\r\n          .build();\r\n\r\n      AdminInitiateAuthResponse adminFlowResponse = cognitoClient.adminInitiateAuth(authRequest);\r\n\r\n      log.info(\"Admin flow adminFlowResponse\");\r\n      logResponse(adminFlowResponse);\r\n\r\n    } catch (CognitoIdentityProviderException e) {\r\n      log.error(\"CognitoIdentityProviderException: {}\", e.getMessage());\r\n    }\r\n  }\r\n\r\n  private void logResponse(AdminInitiateAuthResponse response) {\r\n    log.info(\"Authentication result: {}\", response.authenticationResult());\r\n    log.info(\"access token: {}\",\r\n             response.authenticationResult()\r\n                     .accessToken()\r\n    );\r\n    log.info(\"Challenge parameters: {}\", response.challengeParameters());\r\n    log.info(\"Session: {}\", response.session());\r\n    log.info(\"Challenge name: {}\", response.challengeName());\r\n  }\r\n\r\n  private void listUsers(CognitoIdentityProviderClient cognitoClient) {\r\n\r\n    log.info(\"CognitoPocAssist.listUsers: Listing users\");\r\n\r\n    cognitoClient.listUsers(\r\n                     ListUsersRequest.builder()\r\n                                     .limit(2)\r\n                                     .userPoolId(userPool)\r\n                                     .build()\r\n                 )\r\n                 .users()\r\n                 .forEach(userType -> log.info(\"User: {}\", userType));\r\n  }\r\n}\r\n\r\n```\n\n### Expected Behavior\n\nAs per AWS Cognito document, it should return a response having an access token. Not sure what is missing?\r\n\r\n`AdminInitiateAuthResponse adminFlowResponse = cognitoClient.adminInitiateAuth(authRequest);`\n\n### Current Behavior\n\nFollowing invocation always return null response\r\n\r\n`AdminInitiateAuthResponse adminFlowResponse = cognitoClient.adminInitiateAuth(authRequest);`\n\n### Reproduction Steps\n\n1. Create a Cognito user pool\r\n2. Add app client for newly created pool\r\n3. Add user for newly created pool\r\n4. Create a map with user-pool-id, username, clientId, secret_hash (optional) for `ADMIN_USER_PASSWORD_AUTH` type\r\n5. Run the code sample\n\n### Possible Solution\n\nNot sure but need some advise on what is missing, although the code is based on documentation. \n\n### Additional Information/Context\n\nReferring these documents:\r\n- [Amazon Cognito Identity Provider examples using SDK for Java 2.x](https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/java_cognito-identity-provider_code_examples.html)\r\n- [Admin authentication flow](https://docs.aws.amazon.com/cognito/latest/developerguide/amazon-cognito-user-pools-authentication-flow.html#amazon-cognito-user-pools-admin-authentication-flow)\r\n- [adminInitiateAuth](https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/cognitoidentityprovider/CognitoIdentityProviderClient.html#adminInitiateAuth(java.util.function.Consumer))\r\n- [Admin initiate auth](https://docs.aws.amazon.com/cognito-user-identity-pools/latest/APIReference/API_AdminInitiateAuth.html)\n\n### AWS Java SDK version used\n\n2.24.1\n\n### JDK version used\n\n21\n\n### Operating System and version\n\nubuntu2204-2023-07-25",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5134/reactions",
            "total_count": 2,
            "+1": 2,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5134/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5127",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5127/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5127/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5127/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/5127",
        "id": 2254584801,
        "node_id": "I_kwDOBa1eV86GYjvh",
        "number": 5127,
        "title": "ClassNotFoundException after Spring Boot Native Image compilation for s3/internal/ApplyUserAgentInterceptor.java",
        "user": {
            "login": "klopfdreh",
            "id": 980773,
            "node_id": "MDQ6VXNlcjk4MDc3Mw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/980773?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/klopfdreh",
            "html_url": "https://github.com/klopfdreh",
            "followers_url": "https://api.github.com/users/klopfdreh/followers",
            "following_url": "https://api.github.com/users/klopfdreh/following{/other_user}",
            "gists_url": "https://api.github.com/users/klopfdreh/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/klopfdreh/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/klopfdreh/subscriptions",
            "organizations_url": "https://api.github.com/users/klopfdreh/orgs",
            "repos_url": "https://api.github.com/users/klopfdreh/repos",
            "events_url": "https://api.github.com/users/klopfdreh/events{/privacy}",
            "received_events_url": "https://api.github.com/users/klopfdreh/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 3770445638,
                "node_id": "LA_kwDOBa1eV87gvG9G",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/graalvm",
                "name": "graalvm",
                "color": "FBCA04",
                "default": false,
                "description": ""
            },
            {
                "id": 4731219696,
                "node_id": "LA_kwDOBa1eV88AAAABGgCu8A",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/p2",
                "name": "p2",
                "color": "FF8C00",
                "default": false,
                "description": "This is a standard priority issue"
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 4,
        "created_at": "2024-04-20T14:48:44Z",
        "updated_at": "2024-05-06T23:03:38Z",
        "closed_at": "2024-05-06T23:03:19Z",
        "author_association": "CONTRIBUTOR",
        "active_lock_reason": null,
        "body": "### Describe the bug\r\n\r\nThe `reflect-config.json` is missing in the `s3` for `services-custom/s3-transfer-manager/src/main/java/software/amazon/awssdk/transfer/s3/internal/ApplyUserAgentInterceptor.java` which causes the Spring Boot Native build to throw a java.lang.ClassNotFoundException\r\n\r\n### Expected Behavior\r\n\r\nWhen the `reflect-config.json` is added like in other packages and it is added via `-H:ReflectionConfigurationResources` to the native build, no `java.lang.ClassNotFoundException` is going to occur anymore.\r\n\r\n### Current Behavior\r\n\r\nThere is a `java.lang.ClassNotFoundException` during the runtime as the class ApplyUserAgentInterceptor.java can not be loaded JIT in a native image.\r\n\r\n```java\r\njava.lang.ClassNotFoundException: software.amazon.awssdk.transfer.s3.internal.ApplyUserAgentInterceptor\r\nat c.o.svm.core.hub.ClassForNameSupport.forName(ClassForNameSupport.java:123)\r\nat c.o.svm.core.hub.ClassForNameSupport.forName(ClassForNameSupport.java:87)\r\nat java.lang.Class.forName(DynamicHub.java:1324)\r\nat java.lang.Class.forName(DynamicHub.java:1287)\r\nat java.lang.Class.forName(DynamicHub.java:1280)\r\nat s.a.a.c.internal.util.ClassLoaderHelper.loadClass(ClassLoaderHelper.java:114)\r\nat s.a.a.c.internal.util.ClassLoaderHelper.loadClass(ClassLoaderHelper.java:73)\r\nat s.a.a.c.i.ClasspathInterceptorChainFactory.createExecutionInterceptor(ClasspathInterceptorChainFactory.java:123)\r\n... 206 common frames omitted\r\n```\r\n\r\n### Reproduction Steps\r\n\r\nNative compile a Spring Boot application like described here: https://aws.amazon.com/de/blogs/developer/graalvm-native-image-support-in-the-aws-sdk-for-java-2-x/ - note: the `-H:ReflectionConfigurationResources=META-INF/native-image/software.amazon.awssdk/s3/reflect-config.json` is not working anymore as it is missing.\r\n\r\n### Possible Solution\r\n\r\nAdd the `reflect-config.json` to the s3 package with the following content.\r\n\r\n```xml\r\n[\r\n  {\r\n    \"name\": \"software.amazon.awssdk.transfer.s3.internal.ApplyUserAgentInterceptor\",\r\n    \"methods\": [\r\n      {\r\n        \"name\": \"<init>\",\r\n        \"parameterTypes\": []\r\n      }\r\n    ]\r\n  }\r\n]\r\n```\r\n\r\n### Additional Information/Context\r\n\r\nN/A\r\n\r\n### AWS Java SDK version used\r\n\r\n2.25.34\r\n\r\n### JDK version used\r\n\r\njdk17.0.10\r\n\r\n### Operating System and version\r\n\r\nlinux / ubi9-minimal:9.3-1612",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5127/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5127/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5125",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5125/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5125/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5125/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/5125",
        "id": 2253877741,
        "node_id": "I_kwDOBa1eV86GV3Ht",
        "number": 5125,
        "title": "MediaLive waitUntilInputDeleted does not work.",
        "user": {
            "login": "cobar79",
            "id": 42838373,
            "node_id": "MDQ6VXNlcjQyODM4Mzcz",
            "avatar_url": "https://avatars.githubusercontent.com/u/42838373?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/cobar79",
            "html_url": "https://github.com/cobar79",
            "followers_url": "https://api.github.com/users/cobar79/followers",
            "following_url": "https://api.github.com/users/cobar79/following{/other_user}",
            "gists_url": "https://api.github.com/users/cobar79/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/cobar79/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/cobar79/subscriptions",
            "organizations_url": "https://api.github.com/users/cobar79/orgs",
            "repos_url": "https://api.github.com/users/cobar79/repos",
            "events_url": "https://api.github.com/users/cobar79/events{/privacy}",
            "received_events_url": "https://api.github.com/users/cobar79/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 1326720995,
                "node_id": "MDU6TGFiZWwxMzI2NzIwOTk1",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/response-requested",
                "name": "response-requested",
                "color": "666666",
                "default": false,
                "description": "Waiting on additional info and feedback. Will move to \"closing-soon\" in 10 days."
            },
            {
                "id": 4731219696,
                "node_id": "LA_kwDOBa1eV88AAAABGgCu8A",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/p2",
                "name": "p2",
                "color": "FF8C00",
                "default": false,
                "description": "This is a standard priority issue"
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "debora-ito",
            "id": 476307,
            "node_id": "MDQ6VXNlcjQ3NjMwNw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/476307?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/debora-ito",
            "html_url": "https://github.com/debora-ito",
            "followers_url": "https://api.github.com/users/debora-ito/followers",
            "following_url": "https://api.github.com/users/debora-ito/following{/other_user}",
            "gists_url": "https://api.github.com/users/debora-ito/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/debora-ito/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/debora-ito/subscriptions",
            "organizations_url": "https://api.github.com/users/debora-ito/orgs",
            "repos_url": "https://api.github.com/users/debora-ito/repos",
            "events_url": "https://api.github.com/users/debora-ito/events{/privacy}",
            "received_events_url": "https://api.github.com/users/debora-ito/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "debora-ito",
                "id": 476307,
                "node_id": "MDQ6VXNlcjQ3NjMwNw==",
                "avatar_url": "https://avatars.githubusercontent.com/u/476307?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/debora-ito",
                "html_url": "https://github.com/debora-ito",
                "followers_url": "https://api.github.com/users/debora-ito/followers",
                "following_url": "https://api.github.com/users/debora-ito/following{/other_user}",
                "gists_url": "https://api.github.com/users/debora-ito/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/debora-ito/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/debora-ito/subscriptions",
                "organizations_url": "https://api.github.com/users/debora-ito/orgs",
                "repos_url": "https://api.github.com/users/debora-ito/repos",
                "events_url": "https://api.github.com/users/debora-ito/events{/privacy}",
                "received_events_url": "https://api.github.com/users/debora-ito/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 10,
        "created_at": "2024-04-19T20:07:48Z",
        "updated_at": "2024-05-15T13:09:02Z",
        "closed_at": "2024-05-15T13:08:45Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\n\nWhen using MediaLive waitUntilInputDeleted when the input is in a \"Detached\" state, the input is not deleted and the request times out.\r\n\r\nWhen directly deleting the mediaLiveClient.deleteInput(DeleteInputRequest.builder().inputId(inputId).build());  the input is deleted.\r\n\r\nHowever, this makes the deletion of the Input Security Group fail because it is not Idle.\r\nI did search for MediaLiveWaiter waitUntilInputSecurityGroupIdle but it does not seem to exist.\r\n\n\n### Expected Behavior\n\nThe MediaLive input should be immediately deleted since it is in a Detached state and not time out. This would insure that the Security Group is Idle and able to be deleted.\n\n### Current Behavior\n\n``` software.amazon.awssdk.core.exception.SdkClientException: The waiter has exceeded the max retry attempts: 21 ```\r\n\r\nSubsequently, you have to enter the console and delete the detached Input, wait a few seconds and delete the Security group once it is Idle.\n\n### Reproduction Steps\n\nSee\r\n\r\n```\r\n\tpublic DescribeInputResponse deleteInput(String inputId) {\r\n\t\t//Deleting it without wait works, but leaves security group since it is not idle and there isn't\r\n\t\t//a waiter for deleting security group until idle.\r\n//\t\tmediaLiveClient.deleteInput(DeleteInputRequest.builder().inputId(inputId).build());\r\n\r\n\t\tDescribeInputResponse describeInputResponse = waitTillInputDetached(inputId);\r\n\t\tlog.info(\"{}:: input state {}\", describeInputResponse.id(), describeInputResponse.state());\r\n\t\tDescribeInputResponse deleteResponse;\r\n\t\ttry (MediaLiveWaiter mlWaiter = MediaLiveWaiter.builder()\r\n\t\t\t.client(mediaLiveClient)\r\n\t\t\t.overrideConfiguration(override -> override\r\n\t\t\t\t.waitTimeout(Duration.ofSeconds(120))\r\n\t\t\t\t.maxAttempts(21)\r\n\t\t\t\t.build())\r\n\t\t\t.build()\r\n\t\t) {\r\n\t\t\tResponseOrException<DescribeInputResponse> responseOrException = mlWaiter\r\n\t\t\t\t.waitUntilInputDeleted(builder -> builder.inputId(inputId))\r\n\t\t\t\t.matched();\r\n\t\t\tdeleteResponse = responseOrException.response()\r\n\t\t\t\t.orElseThrow(() -> new VideoServiceRuntimeException(inputId + \":: not deleted\", ErrorReason.SERVICE_EXCEPTION));\r\n\t\t\tlog.info(\"{}:: input deleted\", inputId);\r\n\t\t\treturn deleteResponse;\r\n\t\t}\r\n\t}\r\n\r\n```\r\n\r\nRun MediaLiveServiceTests whenCreateChannel_givenChannelRequest_thenCreateChannel\r\n\r\nFailure occurs because it is unclear where to set the Archive S3 URL in the SDK.\r\n**Archive group destination A**\r\nEnter a destination for archiving your first group.\r\n**URL** s3://&lt;bucket&gt;/&lt;folder&gt;/&lt;file-prefix&gt;\r\n\r\n```\r\n\t\tS3Uri s3Uri = s3Service.createArchiveFolder(liveName);\r\n\t\t//Add liveName to simulate s3://bucket/folder/liveName_NameModifier.segment#.ts)\r\n\t\tString destinationUri = s3Uri.uri().toString() + '/' + liveName;\r\n\t\tString[] finalDestinationUri = {destinationUri};\r\n\r\n\t\treturn OutputGroup.builder()\r\n\t\t\t.name(\"archive-s3\")\r\n\t\t\t.outputGroupSettings(outputGroupSettings -> outputGroupSettings\r\n\t\t\t\t.archiveGroupSettings(archiveGroupSettings -> archiveGroupSettings\r\n\t\t\t\t\t.rolloverInterval(mediaLiveConfig.getRolloverSeconds())\r\n\t\t\t\t\t.destination(destination -> destination.destinationRefId(finalDestinationUri[0]))\r\n\t\t\t\t\t.build())\r\n\t\t\t\t.build())\r\n\t\t\t.outputs(archiveOutput)\r\n\t\t\t.build();\r\n\r\nObject references undefined destination \"s3://bucket/mli-test-01-test-01/mli-test-01-test-01\" (Service: MediaLive, Status Code: 422, Request ID: scoobyDubbyDoo)\r\n```\r\n\r\n\r\n\r\n\r\n[Video Service App GitHub](https://github.com/cobar79/video-service/tree/main/video-service-app)\r\n\n\n### Possible Solution\n\nFix waitUntilInputDeleted to delete the Detached Input\r\n```\r\nResponseOrException<DescribeInputResponse> responseOrException = mlWaiter\r\n\t\t\t\t.waitUntilInputDeleted(builder -> builder.inputId(inputId))\r\n\t\t\t\t.matched();\r\n```\r\n\r\nAdd waitUntilInputSecurityGroupIdle functionallity\n\n### Additional Information/Context\n\n_No response_\n\n### AWS Java SDK version used\n\n2.25.14\n\n### JDK version used\n\nCorretto-17.0.7.7.1 (build 17.0.7+7-LTS)\n\n### Operating System and version\n\nWindows 10",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5125/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5125/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5116",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5116/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5116/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5116/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/5116",
        "id": 2250543471,
        "node_id": "I_kwDOBa1eV86GJJFv",
        "number": 5116,
        "title": "endpoints-spi is missing in bom",
        "user": {
            "login": "laymain",
            "id": 389065,
            "node_id": "MDQ6VXNlcjM4OTA2NQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/389065?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/laymain",
            "html_url": "https://github.com/laymain",
            "followers_url": "https://api.github.com/users/laymain/followers",
            "following_url": "https://api.github.com/users/laymain/following{/other_user}",
            "gists_url": "https://api.github.com/users/laymain/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/laymain/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/laymain/subscriptions",
            "organizations_url": "https://api.github.com/users/laymain/orgs",
            "repos_url": "https://api.github.com/users/laymain/repos",
            "events_url": "https://api.github.com/users/laymain/events{/privacy}",
            "received_events_url": "https://api.github.com/users/laymain/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 4731219696,
                "node_id": "LA_kwDOBa1eV88AAAABGgCu8A",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/p2",
                "name": "p2",
                "color": "FF8C00",
                "default": false,
                "description": "This is a standard priority issue"
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2024-04-18T12:15:28Z",
        "updated_at": "2024-04-23T19:15:47Z",
        "closed_at": "2024-04-23T19:15:27Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\n\nHi,\r\n\r\nIt seems that [endpoints-spi](https://github.com/aws/aws-sdk-java-v2/blob/5deea56ba5925a44f7607f57f2b2e93158ddc030/core/endpoints-spi/pom.xml#L27) artifact is missing in [bom](https://github.com/aws/aws-sdk-java-v2/blob/5deea56ba5925a44f7607f57f2b2e93158ddc030/bom/pom.xml) which could lead to version conflict issues.\n\n### Expected Behavior\n\nHaving `endpoints-spi` in `bom`\n\n### Current Behavior\n\nMissing `endpoints-spi` in `bom`\n\n### Reproduction Steps\n\nImport bom\r\n\r\n```xml\r\n<dependencyManagement>\r\n  <dependencies>\r\n    <dependency>\r\n      <groupId>software.amazon.awssdk</groupId>\r\n      <artifactId>bom</artifactId>\r\n      <version>${aws.version}</version>\r\n      <type>pom</type>\r\n      <scope>import</scope>\r\n    </dependency>\r\n  </dependencies>\r\n</dependencyManagement>\r\n```\n\n### Possible Solution\n\nWorkaround:\r\n\r\n```xml\r\n<dependencyManagement>\r\n  <dependencies>\r\n    <dependency>\r\n      <groupId>software.amazon.awssdk</groupId>\r\n      <artifactId>bom</artifactId>\r\n      <version>${aws.version}</version>\r\n      <type>pom</type>\r\n      <scope>import</scope>\r\n    </dependency>\r\n    <dependency>\r\n       <groupId>software.amazon.awssdk</groupId>\r\n       <artifactId>endpoints-spi</artifactId>\r\n       <version>${aws.version}</version>\r\n    </dependency>\r\n  </dependencies>\r\n</dependencyManagement>\r\n```\n\n### Additional Information/Context\n\n_No response_\n\n### AWS Java SDK version used\n\n2.25.33\n\n### JDK version used\n\nnot relevant\n\n### Operating System and version\n\nnot relevant",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5116/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5116/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5111",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5111/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5111/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5111/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/5111",
        "id": 2248047661,
        "node_id": "I_kwDOBa1eV86F_nwt",
        "number": 5111,
        "title": "software.amazon.awssdk.core.exception.SdkClientException: Unable to unmarshall response (null). Response Code: 200, Response Text: OK when calling `PutItem`",
        "user": {
            "login": "ashr123",
            "id": 26481657,
            "node_id": "MDQ6VXNlcjI2NDgxNjU3",
            "avatar_url": "https://avatars.githubusercontent.com/u/26481657?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ashr123",
            "html_url": "https://github.com/ashr123",
            "followers_url": "https://api.github.com/users/ashr123/followers",
            "following_url": "https://api.github.com/users/ashr123/following{/other_user}",
            "gists_url": "https://api.github.com/users/ashr123/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/ashr123/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ashr123/subscriptions",
            "organizations_url": "https://api.github.com/users/ashr123/orgs",
            "repos_url": "https://api.github.com/users/ashr123/repos",
            "events_url": "https://api.github.com/users/ashr123/events{/privacy}",
            "received_events_url": "https://api.github.com/users/ashr123/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 2020412015,
                "node_id": "MDU6TGFiZWwyMDIwNDEyMDE1",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/closed-for-staleness",
                "name": "closed-for-staleness",
                "color": "eeeeee",
                "default": false,
                "description": ""
            },
            {
                "id": 2106025406,
                "node_id": "MDU6TGFiZWwyMTA2MDI1NDA2",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/dynamodb-enhanced",
                "name": "dynamodb-enhanced",
                "color": "22689e",
                "default": false,
                "description": ""
            },
            {
                "id": 4731219696,
                "node_id": "LA_kwDOBa1eV88AAAABGgCu8A",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/p2",
                "name": "p2",
                "color": "FF8C00",
                "default": false,
                "description": "This is a standard priority issue"
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "debora-ito",
            "id": 476307,
            "node_id": "MDQ6VXNlcjQ3NjMwNw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/476307?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/debora-ito",
            "html_url": "https://github.com/debora-ito",
            "followers_url": "https://api.github.com/users/debora-ito/followers",
            "following_url": "https://api.github.com/users/debora-ito/following{/other_user}",
            "gists_url": "https://api.github.com/users/debora-ito/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/debora-ito/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/debora-ito/subscriptions",
            "organizations_url": "https://api.github.com/users/debora-ito/orgs",
            "repos_url": "https://api.github.com/users/debora-ito/repos",
            "events_url": "https://api.github.com/users/debora-ito/events{/privacy}",
            "received_events_url": "https://api.github.com/users/debora-ito/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "debora-ito",
                "id": 476307,
                "node_id": "MDQ6VXNlcjQ3NjMwNw==",
                "avatar_url": "https://avatars.githubusercontent.com/u/476307?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/debora-ito",
                "html_url": "https://github.com/debora-ito",
                "followers_url": "https://api.github.com/users/debora-ito/followers",
                "following_url": "https://api.github.com/users/debora-ito/following{/other_user}",
                "gists_url": "https://api.github.com/users/debora-ito/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/debora-ito/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/debora-ito/subscriptions",
                "organizations_url": "https://api.github.com/users/debora-ito/orgs",
                "repos_url": "https://api.github.com/users/debora-ito/repos",
                "events_url": "https://api.github.com/users/debora-ito/events{/privacy}",
                "received_events_url": "https://api.github.com/users/debora-ito/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 10,
        "created_at": "2024-04-17T11:21:54Z",
        "updated_at": "2024-05-15T00:20:52Z",
        "closed_at": "2024-05-15T00:20:52Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\r\n\r\nSince upgrading to JDK 21 we sometimes getting the mentioned error\r\n\r\n### Expected Behavior\r\n\r\nEnhanced client returning from `DefaultDynamoDbTable.putItem` correctly as usual, as i did in JDK 17\r\n\r\n### Current Behavior\r\n\r\n```java\r\nsoftware.amazon.awssdk.core.exception.SdkClientException: Unable to unmarshall response (null). Response Code: 200, Response Text: OK\r\n\tat software.amazon.awssdk.core.exception.SdkClientException$BuilderImpl.build(SdkClientException.java:111) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handleSuccessResponse(CombinedResponseHandler.java:110) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handleResponse(CombinedResponseHandler.java:75) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handle(CombinedResponseHandler.java:60) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handle(CombinedResponseHandler.java:41) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.HandleResponseStage.execute(HandleResponseStage.java:40) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.HandleResponseStage.execute(HandleResponseStage.java:30) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:72) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:42) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:78) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:40) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:52) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:37) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage.execute(RetryableStage.java:81) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage.execute(RetryableStage.java:36) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.StreamManagingStage.execute(StreamManagingStage.java:56) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.StreamManagingStage.execute(StreamManagingStage.java:36) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.executeWithTimer(ApiCallTimeoutTrackingStage.java:80) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.execute(ApiCallTimeoutTrackingStage.java:60) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.execute(ApiCallTimeoutTrackingStage.java:42) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallMetricCollectionStage.execute(ApiCallMetricCollectionStage.java:50) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallMetricCollectionStage.execute(ApiCallMetricCollectionStage.java:32) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ExecutionFailureExceptionReportingStage.execute(ExecutionFailureExceptionReportingStage.java:37) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ExecutionFailureExceptionReportingStage.execute(ExecutionFailureExceptionReportingStage.java:26) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.AmazonSyncHttpClient$RequestExecutionBuilderImpl.execute(AmazonSyncHttpClient.java:198) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.invoke(BaseSyncClientHandler.java:103) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.doExecute(BaseSyncClientHandler.java:171) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.lambda$execute$1(BaseSyncClientHandler.java:82) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.measureApiCallSuccess(BaseSyncClientHandler.java:179) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.execute(BaseSyncClientHandler.java:76) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.client.handler.SdkSyncClientHandler.execute(SdkSyncClientHandler.java:45) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.awscore.client.handler.AwsSyncClientHandler.execute(AwsSyncClientHandler.java:56) ~[aws-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.services.dynamodb.DefaultDynamoDbClient.putItem(DefaultDynamoDbClient.java:3932) ~[dynamodb-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.enhanced.dynamodb.internal.operations.CommonOperation.execute(CommonOperation.java:114) ~[dynamodb-enhanced-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.enhanced.dynamodb.internal.operations.TableOperation.executeOnPrimaryIndex(TableOperation.java:59) ~[dynamodb-enhanced-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.enhanced.dynamodb.internal.client.DefaultDynamoDbTable.putItem(DefaultDynamoDbTable.java:268) ~[dynamodb-enhanced-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.enhanced.dynamodb.internal.client.DefaultDynamoDbTable.putItem(DefaultDynamoDbTable.java:276) ~[dynamodb-enhanced-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.enhanced.dynamodb.internal.client.DefaultDynamoDbTable.putItem(DefaultDynamoDbTable.java:281) ~[dynamodb-enhanced-2.20.157.jar:?]\r\n\t...\r\n```\r\n\r\nAnother unexplained exception:\r\n\r\n```java\r\nsoftware.amazon.awssdk.core.exception.AbortedException: Thread was interrupted\r\n    at software.amazon.awssdk.core.exception.AbortedException$BuilderImpl.build(AbortedException.java:93) ~[sdk-core-2.20.157.jar:?]\r\n    at software.amazon.awssdk.core.exception.AbortedException.create(AbortedException.java:38) ~[sdk-core-2.20.157.jar:?]\r\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.handleInterruptedException(ApiCallTimeoutTrackingStage.java:143) ~[sdk-core-2.20.157.jar:?]\r\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.translatePipelineException(ApiCallTimeoutTrackingStage.java:107) ~[sdk-core-2.20.157.jar:?]\r\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.execute(ApiCallTimeoutTrackingStage.java:62) ~[sdk-core-2.20.157.jar:?]\r\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.execute(ApiCallTimeoutTrackingStage.java:42) ~[sdk-core-2.20.157.jar:?]\r\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallMetricCollectionStage.execute(ApiCallMetricCollectionStage.java:50) ~[sdk-core-2.20.157.jar:?]\r\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallMetricCollectionStage.execute(ApiCallMetricCollectionStage.java:32) ~[sdk-core-2.20.157.jar:?]\r\n    at software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206) ~[sdk-core-2.20.157.jar:?]\r\n    at software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206) ~[sdk-core-2.20.157.jar:?]\r\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ExecutionFailureExceptionReportingStage.execute(ExecutionFailureExceptionReportingStage.java:37) ~[sdk-core-2.20.157.jar:?]\r\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ExecutionFailureExceptionReportingStage.execute(ExecutionFailureExceptionReportingStage.java:26) ~[sdk-core-2.20.157.jar:?]\r\n    at software.amazon.awssdk.core.internal.http.AmazonSyncHttpClient$RequestExecutionBuilderImpl.execute(AmazonSyncHttpClient.java:198) ~[sdk-core-2.20.157.jar:?]\r\n    at software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.invoke(BaseSyncClientHandler.java:103) ~[sdk-core-2.20.157.jar:?]\r\n    at software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.doExecute(BaseSyncClientHandler.java:171) ~[sdk-core-2.20.157.jar:?]\r\n    at software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.lambda$execute$1(BaseSyncClientHandler.java:82) ~[sdk-core-2.20.157.jar:?]\r\n    at software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.measureApiCallSuccess(BaseSyncClientHandler.java:179) ~[sdk-core-2.20.157.jar:?]\r\n    at software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.execute(BaseSyncClientHandler.java:76) ~[sdk-core-2.20.157.jar:?]\r\n    at software.amazon.awssdk.core.client.handler.SdkSyncClientHandler.execute(SdkSyncClientHandler.java:45) ~[sdk-core-2.20.157.jar:?]\r\n    at software.amazon.awssdk.awscore.client.handler.AwsSyncClientHandler.execute(AwsSyncClientHandler.java:56) ~[aws-core-2.20.157.jar:?]\r\n    at software.amazon.awssdk.services.dynamodb.DefaultDynamoDbClient.putItem(DefaultDynamoDbClient.java:3932) ~[dynamodb-2.20.157.jar:?]\r\n    at software.amazon.awssdk.enhanced.dynamodb.internal.operations.CommonOperation.execute(CommonOperation.java:114) ~[dynamodb-enhanced-2.20.157.jar:?]\r\n    at software.amazon.awssdk.enhanced.dynamodb.internal.operations.TableOperation.executeOnPrimaryIndex(TableOperation.java:59) ~[dynamodb-enhanced-2.20.157.jar:?]\r\n    at software.amazon.awssdk.enhanced.dynamodb.internal.client.DefaultDynamoDbTable.putItem(DefaultDynamoDbTable.java:268) ~[dynamodb-enhanced-2.20.157.jar:?]\r\n    at software.amazon.awssdk.enhanced.dynamodb.internal.client.DefaultDynamoDbTable.putItem(DefaultDynamoDbTable.java:276) ~[dynamodb-enhanced-2.20.157.jar:?]\r\n    at software.amazon.awssdk.enhanced.dynamodb.internal.client.DefaultDynamoDbTable.putItem(DefaultDynamoDbTable.java:281) ~[dynamodb-enhanced-2.20.157.jar:?]\r\n    ...\r\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]\r\n    at java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]\r\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]\r\n    at java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]\r\n    at java.util.concurrent.ForkJoinTask$RunnableExecuteAction.exec(ForkJoinTask.java:1423) ~[?:?]\r\n    at java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387) ~[?:?]\r\n    at java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1312) ~[?:?]\r\n    at java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1843) ~[?:?]\r\n    at java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1808) ~[?:?]\r\n    at java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188) ~[?:?]\r\nCaused by: software.amazon.awssdk.core.exception.SdkInterruptedException\r\n    at software.amazon.awssdk.core.internal.http.InterruptMonitor.checkInterrupted(InterruptMonitor.java:40) ~[sdk-core-2.20.157.jar:?]\r\n    at software.amazon.awssdk.core.internal.http.StreamManagingStage.execute(StreamManagingStage.java:55) ~[sdk-core-2.20.157.jar:?]\r\n    at software.amazon.awssdk.core.internal.http.StreamManagingStage.execute(StreamManagingStage.java:36) ~[sdk-core-2.20.157.jar:?]\r\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.executeWithTimer(ApiCallTimeoutTrackingStage.java:80) ~[sdk-core-2.20.157.jar:?]\r\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.execute(ApiCallTimeoutTrackingStage.java:60) ~[sdk-core-2.20.157.jar:?]\r\n    ... 42 more\r\n```\r\n\r\nAnd 3rd kind of exception:\r\n\r\n```java\r\nsoftware.amazon.awssdk.core.exception.AbortedException: null\r\n\tat software.amazon.awssdk.core.exception.AbortedException$BuilderImpl.build(AbortedException.java:93) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.io.SdkFilterInputStream.abortIfNeeded(SdkFilterInputStream.java:45) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.io.SdkFilterInputStream.read(SdkFilterInputStream.java:65) ~[sdk-core-2.20.157.jar:?]\r\n\tat org.apache.http.entity.InputStreamEntity.writeTo(InputStreamEntity.java:140) ~[httpcore-4.4.16.jar:4.4.16]\r\n\tat software.amazon.awssdk.http.apache.internal.RepeatableInputStreamRequestEntity.writeTo(RepeatableInputStreamRequestEntity.java:158) ~[apache-client-2.20.157.jar:?]\r\n\tat org.apache.http.impl.DefaultBHttpClientConnection.sendRequestEntity(DefaultBHttpClientConnection.java:156) ~[httpcore-4.4.16.jar:4.4.16]\r\n\tat org.apache.http.impl.conn.CPoolProxy.sendRequestEntity(CPoolProxy.java:152) ~[httpclient-4.5.14.jar:4.5.14]\r\n\tat org.apache.http.protocol.HttpRequestExecutor.doSendRequest(HttpRequestExecutor.java:238) ~[httpcore-4.4.16.jar:4.4.16]\r\n\tat org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:123) ~[httpcore-4.4.16.jar:4.4.16]\r\n\tat org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:272) ~[httpclient-4.5.14.jar:4.5.14]\r\n\tat org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186) ~[httpclient-4.5.14.jar:4.5.14]\r\n\tat org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185) ~[httpclient-4.5.14.jar:4.5.14]\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83) ~[httpclient-4.5.14.jar:4.5.14]\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.14.jar:4.5.14]\r\n\tat software.amazon.awssdk.http.apache.internal.impl.ApacheSdkHttpClient.execute(ApacheSdkHttpClient.java:72) ~[apache-client-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.http.apache.ApacheHttpClient.execute(ApacheHttpClient.java:254) ~[apache-client-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.http.apache.ApacheHttpClient.access$500(ApacheHttpClient.java:104) ~[apache-client-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.http.apache.ApacheHttpClient$1.call(ApacheHttpClient.java:231) ~[apache-client-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.http.apache.ApacheHttpClient$1.call(ApacheHttpClient.java:228) ~[apache-client-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.util.MetricUtils.measureDurationUnsafe(MetricUtils.java:67) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.MakeHttpRequestStage.executeHttpRequest(MakeHttpRequestStage.java:77) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.MakeHttpRequestStage.execute(MakeHttpRequestStage.java:56) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.MakeHttpRequestStage.execute(MakeHttpRequestStage.java:39) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:72) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:42) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:78) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:40) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:52) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:37) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage.execute(RetryableStage.java:81) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage.execute(RetryableStage.java:36) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.StreamManagingStage.execute(StreamManagingStage.java:56) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.StreamManagingStage.execute(StreamManagingStage.java:36) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.executeWithTimer(ApiCallTimeoutTrackingStage.java:80) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.execute(ApiCallTimeoutTrackingStage.java:60) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.execute(ApiCallTimeoutTrackingStage.java:42) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallMetricCollectionStage.execute(ApiCallMetricCollectionStage.java:50) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallMetricCollectionStage.execute(ApiCallMetricCollectionStage.java:32) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ExecutionFailureExceptionReportingStage.execute(ExecutionFailureExceptionReportingStage.java:37) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ExecutionFailureExceptionReportingStage.execute(ExecutionFailureExceptionReportingStage.java:26) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.http.AmazonSyncHttpClient$RequestExecutionBuilderImpl.execute(AmazonSyncHttpClient.java:198) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.invoke(BaseSyncClientHandler.java:103) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.doExecute(BaseSyncClientHandler.java:171) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.lambda$execute$1(BaseSyncClientHandler.java:82) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.measureApiCallSuccess(BaseSyncClientHandler.java:179) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.execute(BaseSyncClientHandler.java:76) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.core.client.handler.SdkSyncClientHandler.execute(SdkSyncClientHandler.java:45) ~[sdk-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.awscore.client.handler.AwsSyncClientHandler.execute(AwsSyncClientHandler.java:56) ~[aws-core-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.services.dynamodb.DefaultDynamoDbClient.putItem(DefaultDynamoDbClient.java:3932) ~[dynamodb-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.enhanced.dynamodb.internal.operations.CommonOperation.execute(CommonOperation.java:114) ~[dynamodb-enhanced-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.enhanced.dynamodb.internal.operations.TableOperation.executeOnPrimaryIndex(TableOperation.java:59) ~[dynamodb-enhanced-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.enhanced.dynamodb.internal.client.DefaultDynamoDbTable.putItem(DefaultDynamoDbTable.java:268) ~[dynamodb-enhanced-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.enhanced.dynamodb.internal.client.DefaultDynamoDbTable.putItem(DefaultDynamoDbTable.java:276) ~[dynamodb-enhanced-2.20.157.jar:?]\r\n\tat software.amazon.awssdk.enhanced.dynamodb.internal.client.DefaultDynamoDbTable.putItem(DefaultDynamoDbTable.java:281) ~[dynamodb-enhanced-2.20.157.jar:?]\r\n\t...\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[?:?]\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[?:?]\r\n\tat java.util.concurrent.ForkJoinTask$RunnableExecuteAction.exec(ForkJoinTask.java:1423) ~[?:?]\r\n\tat java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387) ~[?:?]\r\n\tat java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1312) ~[?:?]\r\n\tat java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1843) ~[?:?]\r\n\tat java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1808) ~[?:?]\r\n\tat java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188) ~[?:?]\r\n```\r\n\r\n### Reproduction Steps\r\n\r\ndon't know\u2026 there is no throttling on DynamoDB table..\r\n\r\n### Possible Solution\r\n\r\n_No response_\r\n\r\n### Additional Information/Context\r\n\r\n_No response_\r\n\r\n### AWS Java SDK version used\r\n\r\n2.20.157, 2.25.31\r\n\r\n### JDK version used\r\n\r\nopenjdk 21.0.2 2024-01-16 LTS OpenJDK Runtime Environment Corretto-21.0.2.14.1 (build 21.0.2+14-LTS) OpenJDK 64-Bit Server VM Corretto-21.0.2.14.1 (build 21.0.2+14-LTS, mixed mode, sharing)\r\n\r\n### Operating System and version\r\n\r\nUbuntu 22.04",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5111/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5111/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5108",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5108/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5108/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5108/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/5108",
        "id": 2245636714,
        "node_id": "I_kwDOBa1eV86F2bJq",
        "number": 5108,
        "title": "AWS SDK contains a copy of slf4j which causes problems for the components that have slf4j on the path for imports.",
        "user": {
            "login": "HarshitGupta11",
            "id": 50410275,
            "node_id": "MDQ6VXNlcjUwNDEwMjc1",
            "avatar_url": "https://avatars.githubusercontent.com/u/50410275?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/HarshitGupta11",
            "html_url": "https://github.com/HarshitGupta11",
            "followers_url": "https://api.github.com/users/HarshitGupta11/followers",
            "following_url": "https://api.github.com/users/HarshitGupta11/following{/other_user}",
            "gists_url": "https://api.github.com/users/HarshitGupta11/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/HarshitGupta11/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/HarshitGupta11/subscriptions",
            "organizations_url": "https://api.github.com/users/HarshitGupta11/orgs",
            "repos_url": "https://api.github.com/users/HarshitGupta11/repos",
            "events_url": "https://api.github.com/users/HarshitGupta11/events{/privacy}",
            "received_events_url": "https://api.github.com/users/HarshitGupta11/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 4731219696,
                "node_id": "LA_kwDOBa1eV88AAAABGgCu8A",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/p2",
                "name": "p2",
                "color": "FF8C00",
                "default": false,
                "description": "This is a standard priority issue"
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 3,
        "created_at": "2024-04-16T09:58:37Z",
        "updated_at": "2024-05-07T22:11:36Z",
        "closed_at": "2024-05-07T22:11:17Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\r\n\r\nSlf4j is shaded in the bundle.jar but there is also a unshaded copy of it present in the jar as well. This causes errors in programs having both slf4j and bundle.jar on the classpath.\r\n\r\nThe current latest version of the sdk has two LoggerFactory class,\r\n```\r\n./org/slf4j/LoggerFactory.class\r\n./software/amazon/awssdk/thirdparty/org/slf4j/LoggerFactory.class\r\n```\r\n\r\n### Expected Behavior\r\n\r\nThere should be no unshaded artefacts in the bundle.jar.\r\n\r\n### Current Behavior\r\n\r\nDescribed above.\r\n\r\n### Reproduction Steps\r\n\r\nA simple unzip of the jar reveals the issue.\r\n\r\n### Possible Solution\r\n\r\n_No response_\r\n\r\n### Additional Information/Context\r\n\r\n_No response_\r\n\r\n### AWS Java SDK version used\r\n\r\n2.24.6\r\n\r\n### JDK version used\r\n\r\n1.8\r\n\r\n### Operating System and version\r\n\r\nRedhat 8",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5108/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5108/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5093",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5093/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5093/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5093/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/5093",
        "id": 2236266616,
        "node_id": "I_kwDOBa1eV86FSrh4",
        "number": 5093,
        "title": "Polly: DescribeVoices does not return long-form in supported engines",
        "user": {
            "login": "tsteinberg-sorenson",
            "id": 114586928,
            "node_id": "U_kgDOBtR1MA",
            "avatar_url": "https://avatars.githubusercontent.com/u/114586928?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tsteinberg-sorenson",
            "html_url": "https://github.com/tsteinberg-sorenson",
            "followers_url": "https://api.github.com/users/tsteinberg-sorenson/followers",
            "following_url": "https://api.github.com/users/tsteinberg-sorenson/following{/other_user}",
            "gists_url": "https://api.github.com/users/tsteinberg-sorenson/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tsteinberg-sorenson/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tsteinberg-sorenson/subscriptions",
            "organizations_url": "https://api.github.com/users/tsteinberg-sorenson/orgs",
            "repos_url": "https://api.github.com/users/tsteinberg-sorenson/repos",
            "events_url": "https://api.github.com/users/tsteinberg-sorenson/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tsteinberg-sorenson/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 1871569111,
                "node_id": "MDU6TGFiZWwxODcxNTY5MTEx",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/needs-triage",
                "name": "needs-triage",
                "color": "c7cafc",
                "default": false,
                "description": "This issue or PR still needs to be triaged."
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2024-04-10T19:18:54Z",
        "updated_at": "2024-04-10T19:54:39Z",
        "closed_at": "2024-04-10T19:54:16Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\n\nA few observed issues, likely from the same cause.\r\n\r\n* When using `PollyClient.describeVoices()`, no returned voices have the `long-form` engine in the lists returned from `supportedEngines()`.\r\n* If using `DescribeVoicesRequest.builder().engine(\"long-form\")`, no voices are returned as results.\n\n### Expected Behavior\n\nThe voices listed in the documentation as [supporting the long-form engine](https://docs.aws.amazon.com/polly/latest/dg/long-form-voices.html) have `long-form` included in the `supportedEngines` list(s). This is the behavior seen when using boto3.\n\n### Current Behavior\n\nNo voices have `long-form` included in the `supportedEngines` list(s).\n\n### Reproduction Steps\n\n1. Call `pollyClient.describeVoices(DescribeVoicesRequest.builder().engine(\"long-form\").build()).voices();`\r\n2. Inspect the output of `supportedEngines()` or  `supportedEnginesAsStrings()` for each voice.\r\n3. Note that none contain the `long-form` engine.\n\n### Possible Solution\n\nUnknown; may be a parsing issue?\n\n### Additional Information/Context\n\n_No response_\n\n### AWS Java SDK version used\n\n2.25.28\n\n### JDK version used\n\nopenjdk 11.0.22 2024-01-16 LTS OpenJDK Runtime Environment Corretto-11.0.22.7.1 (build 11.0.22+7-LTS) OpenJDK 64-Bit Server VM Corretto-11.0.22.7.1 (build 11.0.22+7-LTS, mixed mode)\n\n### Operating System and version\n\namazoncorretto:11 based docker container",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5093/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5093/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5085",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5085/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5085/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5085/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/5085",
        "id": 2232745250,
        "node_id": "I_kwDOBa1eV86FFP0i",
        "number": 5085,
        "title": "S3 HeadBucket 301 Error",
        "user": {
            "login": "daeho-ro",
            "id": 40587651,
            "node_id": "MDQ6VXNlcjQwNTg3NjUx",
            "avatar_url": "https://avatars.githubusercontent.com/u/40587651?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/daeho-ro",
            "html_url": "https://github.com/daeho-ro",
            "followers_url": "https://api.github.com/users/daeho-ro/followers",
            "following_url": "https://api.github.com/users/daeho-ro/following{/other_user}",
            "gists_url": "https://api.github.com/users/daeho-ro/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/daeho-ro/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/daeho-ro/subscriptions",
            "organizations_url": "https://api.github.com/users/daeho-ro/orgs",
            "repos_url": "https://api.github.com/users/daeho-ro/repos",
            "events_url": "https://api.github.com/users/daeho-ro/events{/privacy}",
            "received_events_url": "https://api.github.com/users/daeho-ro/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 1326720995,
                "node_id": "MDU6TGFiZWwxMzI2NzIwOTk1",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/response-requested",
                "name": "response-requested",
                "color": "666666",
                "default": false,
                "description": "Waiting on additional info and feedback. Will move to \"closing-soon\" in 10 days."
            },
            {
                "id": 1326720998,
                "node_id": "MDU6TGFiZWwxMzI2NzIwOTk4",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/guidance",
                "name": "guidance",
                "color": "8a19e7",
                "default": false,
                "description": "Question that needs advice or information."
            },
            {
                "id": 2870987787,
                "node_id": "MDU6TGFiZWwyODcwOTg3Nzg3",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/service:s3",
                "name": "service:s3",
                "color": "E06A18",
                "default": false,
                "description": ""
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "bhoradc",
            "id": 122290643,
            "node_id": "U_kgDOB0oB0w",
            "avatar_url": "https://avatars.githubusercontent.com/u/122290643?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/bhoradc",
            "html_url": "https://github.com/bhoradc",
            "followers_url": "https://api.github.com/users/bhoradc/followers",
            "following_url": "https://api.github.com/users/bhoradc/following{/other_user}",
            "gists_url": "https://api.github.com/users/bhoradc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/bhoradc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/bhoradc/subscriptions",
            "organizations_url": "https://api.github.com/users/bhoradc/orgs",
            "repos_url": "https://api.github.com/users/bhoradc/repos",
            "events_url": "https://api.github.com/users/bhoradc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/bhoradc/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "bhoradc",
                "id": 122290643,
                "node_id": "U_kgDOB0oB0w",
                "avatar_url": "https://avatars.githubusercontent.com/u/122290643?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/bhoradc",
                "html_url": "https://github.com/bhoradc",
                "followers_url": "https://api.github.com/users/bhoradc/followers",
                "following_url": "https://api.github.com/users/bhoradc/following{/other_user}",
                "gists_url": "https://api.github.com/users/bhoradc/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/bhoradc/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bhoradc/subscriptions",
                "organizations_url": "https://api.github.com/users/bhoradc/orgs",
                "repos_url": "https://api.github.com/users/bhoradc/repos",
                "events_url": "https://api.github.com/users/bhoradc/events{/privacy}",
                "received_events_url": "https://api.github.com/users/bhoradc/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 3,
        "created_at": "2024-04-09T07:01:46Z",
        "updated_at": "2024-04-09T22:08:05Z",
        "closed_at": "2024-04-09T22:07:46Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\r\n\r\nWhen I run the head-bucket command from CLI V2 with the bucket located in `us-east-1`,\r\n```\r\n> aws s3api head-bucket --bucket <bucket> --region us-east-1     \r\n{\r\n    \"BucketRegion\": \"us-east-1\",\r\n    \"AccessPointAlias\": false\r\n}\r\n> aws s3api head-bucket --bucket <bucket> --region ap-northeast-2\r\n{\r\n    \"BucketRegion\": \"us-east-1\",\r\n    \"AccessPointAlias\": false\r\n}\r\n```\r\nboth region endpoint returns the correct result.\r\n\r\nNow, do it the same thing in java sdk v2,\r\n```\r\n        try (S3Client s3Client = s3ClientBuilder.region(Region.US_EAST_1).build()) {\r\n            region1 = s3Client.headBucket(h -> h.bucket(bucket)).bucketRegion();\r\n            System.out.println(region1);\r\n            // returns us-east-1\r\n        }\r\n        try (S3Client s3Client = s3ClientBuilder.region(Region.AP_NORTHEAST_2).build()) {\r\n            region2 = s3Client.headBucket(h -> h.bucket(bucket)).bucketRegion();\r\n            System.out.println(region2);\r\n            // throws 301 exception\r\n        }\r\n```\r\nthe second block throws an exception and so cannot get the correct region.\r\n\r\nHow do I get the bucket region info without it? `GetBucketLocation` is an legacy alternatives but when I read the [documentation](https://docs.aws.amazon.com/AmazonS3/latest/API/API_GetBucketLocation.html) of it, I noticed that they recommend to move an api to `HeadBucket`!\r\n\r\n> We recommend that you use [HeadBucket](https://docs.aws.amazon.com/AmazonS3/latest/API/API_HeadBucket.html) to return the Region that a bucket resides in. For backward compatibility, Amazon S3 continues to support GetBucketLocation.\r\n\r\nAs far as I know with the error, there is no way to replace the `GetBucketLocation` by `HeadBucket`. Is that correct?\r\n\r\n### Expected Behavior\r\n\r\nWherever I call the `HeadBucket`, it should return the bucket region info without exception.\r\n\r\n### Current Behavior\r\n\r\nWhen I call the `HeadBucket` through the different region endpoint from the bucket region, it throws an exception with the error code 301.\r\n\r\n### Reproduction Steps\r\n\r\nPlace a bucket anywhere, and call the `HeadBucket`.\r\n\r\n```\r\n        try (S3Client s3Client = s3ClientBuilder.region(<where the bucket is not located>).build()) {\r\n            s3Client.headBucket(h -> h.bucket(bucket)).bucketRegion();\r\n            // throws 301 exception\r\n        }\r\n```\r\n\r\n### Possible Solution\r\n\r\n_No response_\r\n\r\n### Additional Information/Context\r\n\r\n_No response_\r\n\r\n### AWS Java SDK version used\r\n\r\n2.25.27\r\n\r\n### JDK version used\r\n\r\n21\r\n\r\n### Operating System and version\r\n\r\nM3 14.3.1",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5085/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5085/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5073",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5073/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5073/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5073/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/5073",
        "id": 2227941957,
        "node_id": "I_kwDOBa1eV86Ey7JF",
        "number": 5073,
        "title": "S3Client.builder() without credentials provider behaves differently than if set explicitly to DefaultCredentialsProvider.create()",
        "user": {
            "login": "DocX",
            "id": 132277,
            "node_id": "MDQ6VXNlcjEzMjI3Nw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/132277?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/DocX",
            "html_url": "https://github.com/DocX",
            "followers_url": "https://api.github.com/users/DocX/followers",
            "following_url": "https://api.github.com/users/DocX/following{/other_user}",
            "gists_url": "https://api.github.com/users/DocX/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/DocX/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/DocX/subscriptions",
            "organizations_url": "https://api.github.com/users/DocX/orgs",
            "repos_url": "https://api.github.com/users/DocX/repos",
            "events_url": "https://api.github.com/users/DocX/events{/privacy}",
            "received_events_url": "https://api.github.com/users/DocX/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 4731221357,
                "node_id": "LA_kwDOBa1eV88AAAABGgC1bQ",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/p3",
                "name": "p3",
                "color": "F5DEB3",
                "default": false,
                "description": "This is a minor priority issue"
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "bhoradc",
            "id": 122290643,
            "node_id": "U_kgDOB0oB0w",
            "avatar_url": "https://avatars.githubusercontent.com/u/122290643?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/bhoradc",
            "html_url": "https://github.com/bhoradc",
            "followers_url": "https://api.github.com/users/bhoradc/followers",
            "following_url": "https://api.github.com/users/bhoradc/following{/other_user}",
            "gists_url": "https://api.github.com/users/bhoradc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/bhoradc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/bhoradc/subscriptions",
            "organizations_url": "https://api.github.com/users/bhoradc/orgs",
            "repos_url": "https://api.github.com/users/bhoradc/repos",
            "events_url": "https://api.github.com/users/bhoradc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/bhoradc/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "bhoradc",
                "id": 122290643,
                "node_id": "U_kgDOB0oB0w",
                "avatar_url": "https://avatars.githubusercontent.com/u/122290643?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/bhoradc",
                "html_url": "https://github.com/bhoradc",
                "followers_url": "https://api.github.com/users/bhoradc/followers",
                "following_url": "https://api.github.com/users/bhoradc/following{/other_user}",
                "gists_url": "https://api.github.com/users/bhoradc/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/bhoradc/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bhoradc/subscriptions",
                "organizations_url": "https://api.github.com/users/bhoradc/orgs",
                "repos_url": "https://api.github.com/users/bhoradc/repos",
                "events_url": "https://api.github.com/users/bhoradc/events{/privacy}",
                "received_events_url": "https://api.github.com/users/bhoradc/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 3,
        "created_at": "2024-04-05T12:40:24Z",
        "updated_at": "2024-04-05T20:29:18Z",
        "closed_at": "2024-04-05T20:28:52Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\r\n\r\nUsing `S3Client` builder without credentials provider, e.g.:\r\n\r\n```java\r\n        S3Client client = S3Client.builder()\r\n                .region(Region.of(\"us-west-2\"))\r\n                .build();\r\n```\r\n\r\ninstantiates internally `DefaultCredentialsProvider` with static `ProfileFile` that results in the credentials not being reloaded when using credentials file via `AWS_SHARED_CREDENTIALS_FILE`.\r\n\r\nHowever passing own instance of `DefaultCredentialsProvider`:\r\n\r\n```java\r\n        S3Client client = S3Client.builder()\r\n                .region(Region.of(\"us-west-2\"))\r\n                .credentialsProvider(DefaultCredentialsProvider.create())\r\n                .build();\r\n```\r\n\r\nworks as expected, refreshing the credentials used when the credentials file is updated on disk.\r\n\r\n### Expected Behavior\r\n\r\nThe default builder should not set static ProfileFile in the default credentials provider. The two examples above should behave the same.\r\n\r\n### Current Behavior\r\n\r\nThe client builder without setting the credentials provider creates client that is not refreshing credentials from the credential file when the file updates.\r\n\r\n### Reproduction Steps\r\n\r\nCreate credentials mock file `aws-sdk-bug/credentials` to make the program failing until file is updated:\r\n```ini\r\n[default]\r\naws_access_key_id=test\r\naws_secret_access_key=test\r\naws_session_token=test\r\n```\r\n\r\nand set the environment variable to use the profile provider from the default provider chain:\r\n```sh\r\n# unset AWS_PROFILE\r\n# unset AWS_ACCESS_KEY_ID\r\n# unset AWS_SECRET_ACCESS_KEY\r\nexport AWS_SHARED_CREDENTIALS_FILE=aws-sdk-bug/credentials\r\n```\r\n\r\nrun following java program:\r\n```java\r\npublic class MyClass {\r\n    public static void main(String[] args) {\r\n        S3Client client = S3Client.builder()\r\n                .region(Region.of(\"us-west-2\"))\r\n                .build();\r\n\r\n        ListObjectsV2Request list = ListObjectsV2Request.builder()\r\n                .bucket(\"your-s3-bucket\")\r\n                .prefix(\"some-prefix/\")\r\n                .build();\r\n\r\n        while(true) {\r\n            System.out.println(\"Fetching list...\");\r\n            try {\r\n                var objects = client.listObjectsV2(list);\r\n                System.out.println(\"Objects count: \" + objects.contents().size());\r\n            } catch (S3Exception e) {\r\n                System.err.println(e.awsErrorDetails().errorMessage());\r\n            } catch (SdkClientException e) {\r\n                System.err.println(e.getMessage());\r\n            }\r\n            System.out.println(\"\");\r\n            try {\r\n                Thread.sleep(5000);\r\n            } catch (InterruptedException e) {\r\n                System.exit(0);\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nwhile it is running, update the `aws-sdk-bug/credentials` file to contain valid credentials. The output should stop printing errors and start print the number of objects in the S3 bucket.\r\n\r\n### Possible Solution\r\n\r\nThe client builder code should use DefaultCredentialsProvider with keeping it's `profileFile` value `null`.\r\n\r\n### Additional Information/Context\r\n\r\n_No response_\r\n\r\n### AWS Java SDK version used\r\n\r\n2.25.25\r\n\r\n### JDK version used\r\n\r\nopenjdk 18.0.1 2022-04-19\r\n\r\n### Operating System and version\r\n\r\nmacOS 13.4.1",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5073/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5073/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5071",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5071/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5071/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5071/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/5071",
        "id": 2227251837,
        "node_id": "I_kwDOBa1eV86EwSp9",
        "number": 5071,
        "title": "Empty Content-Encoding header with S3 CRT client",
        "user": {
            "login": "bertbaron",
            "id": 9292223,
            "node_id": "MDQ6VXNlcjkyOTIyMjM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9292223?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/bertbaron",
            "html_url": "https://github.com/bertbaron",
            "followers_url": "https://api.github.com/users/bertbaron/followers",
            "following_url": "https://api.github.com/users/bertbaron/following{/other_user}",
            "gists_url": "https://api.github.com/users/bertbaron/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/bertbaron/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/bertbaron/subscriptions",
            "organizations_url": "https://api.github.com/users/bertbaron/orgs",
            "repos_url": "https://api.github.com/users/bertbaron/repos",
            "events_url": "https://api.github.com/users/bertbaron/events{/privacy}",
            "received_events_url": "https://api.github.com/users/bertbaron/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 3727605076,
                "node_id": "LA_kwDOBa1eV87eLr1U",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/crt-client",
                "name": "crt-client",
                "color": "FBCA04",
                "default": false,
                "description": ""
            },
            {
                "id": 4731219696,
                "node_id": "LA_kwDOBa1eV88AAAABGgCu8A",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/p2",
                "name": "p2",
                "color": "FF8C00",
                "default": false,
                "description": "This is a standard priority issue"
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "bhoradc",
            "id": 122290643,
            "node_id": "U_kgDOB0oB0w",
            "avatar_url": "https://avatars.githubusercontent.com/u/122290643?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/bhoradc",
            "html_url": "https://github.com/bhoradc",
            "followers_url": "https://api.github.com/users/bhoradc/followers",
            "following_url": "https://api.github.com/users/bhoradc/following{/other_user}",
            "gists_url": "https://api.github.com/users/bhoradc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/bhoradc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/bhoradc/subscriptions",
            "organizations_url": "https://api.github.com/users/bhoradc/orgs",
            "repos_url": "https://api.github.com/users/bhoradc/repos",
            "events_url": "https://api.github.com/users/bhoradc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/bhoradc/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "bhoradc",
                "id": 122290643,
                "node_id": "U_kgDOB0oB0w",
                "avatar_url": "https://avatars.githubusercontent.com/u/122290643?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/bhoradc",
                "html_url": "https://github.com/bhoradc",
                "followers_url": "https://api.github.com/users/bhoradc/followers",
                "following_url": "https://api.github.com/users/bhoradc/following{/other_user}",
                "gists_url": "https://api.github.com/users/bhoradc/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/bhoradc/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bhoradc/subscriptions",
                "organizations_url": "https://api.github.com/users/bhoradc/orgs",
                "repos_url": "https://api.github.com/users/bhoradc/repos",
                "events_url": "https://api.github.com/users/bhoradc/events{/privacy}",
                "received_events_url": "https://api.github.com/users/bhoradc/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 4,
        "created_at": "2024-04-05T07:18:04Z",
        "updated_at": "2024-05-02T12:15:08Z",
        "closed_at": "2024-05-02T12:14:49Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\r\n\r\nWhen performing a PutObjectRequest using S3 CRT client, an empty Content-Encoding header (system-defined metadata) is set to the object.\r\nWhile this header in itself may not be much of a problem, it completely broke our sites served from CloudFront with the Manged-CachingOptimized behavior. The reason is that, when CloudFront decides to send the content compressed, it adds a header like `Content-Encoding: br` but also includes the empty `Content-Encoding:` header. The result is that the browser may assume the content is uncompressed.\r\n\r\nNote that this behavior seems to be very similar to this issue from 2017 on the .NET client: https://github.com/aws/aws-sdk-net/issues/559. The issues in combination with CloudFront is also [mentioned in a comment there](https://github.com/aws/aws-sdk-net/issues/559#issuecomment-286637630).\r\n\r\n### Expected Behavior\r\n\r\nWhen performing a PutObjectRequest using S3 CRT client, without explicitly specifying contentEncoding, no `Content-Encoding` header should be set\r\n\r\n### Current Behavior\r\n\r\nWhen performing a PutObjectRequest using S3 CRT client, without explicitly specifying contentEncoding, an empty Content-Encoding header is set\r\n\r\n### Reproduction Steps\r\n\r\nTo reproduce the following code snippet can be used\r\n```\r\n    public void putObject(String bucket, String key) {\r\n        S3AsyncClient asyncClient = S3AsyncClient.crtBuilder()\r\n                .region(Region.of(System.getenv(SdkSystemSetting.AWS_REGION.environmentVariable())))\r\n                .credentialsProvider(DefaultCredentialsProvider.create())\r\n                .build();\r\n        AsyncRequestBody requestBody = AsyncRequestBody.fromString(\"content\");\r\n        asyncClient.putObject(b -> b.bucket(bucket)\r\n                .key(key)\r\n                .serverSideEncryption(\"AES256\").build(), requestBody).join();\r\n    }\r\n```\r\n\r\n\r\n### Possible Solution\r\n\r\nOur current workaround is to not use the CRT client (replacing `S3AsyncClient.crtBuilder()` with `S3AsyncClient.builder()`)\r\n\r\n### Additional Information/Context\r\n\r\nVersion 0.29.11 of aws-crt was used\r\n\r\n### AWS Java SDK version used\r\n\r\n2.25.1\r\n\r\n### JDK version used\r\n\r\nopenjdk 21.0.2 2024-01-16 LTS\r\n\r\n### Operating System and version\r\n\r\nany",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5071/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5071/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5054",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5054/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5054/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5054/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/5054",
        "id": 2214110243,
        "node_id": "I_kwDOBa1eV86D-KQj",
        "number": 5054,
        "title": "Auth doesn't work if SSO Session Name contains a space",
        "user": {
            "login": "stickfigure",
            "id": 162508,
            "node_id": "MDQ6VXNlcjE2MjUwOA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/162508?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stickfigure",
            "html_url": "https://github.com/stickfigure",
            "followers_url": "https://api.github.com/users/stickfigure/followers",
            "following_url": "https://api.github.com/users/stickfigure/following{/other_user}",
            "gists_url": "https://api.github.com/users/stickfigure/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stickfigure/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stickfigure/subscriptions",
            "organizations_url": "https://api.github.com/users/stickfigure/orgs",
            "repos_url": "https://api.github.com/users/stickfigure/repos",
            "events_url": "https://api.github.com/users/stickfigure/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stickfigure/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 1326721019,
                "node_id": "MDU6TGFiZWwxMzI2NzIxMDE5",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/wontfix",
                "name": "wontfix",
                "color": "d85658",
                "default": true,
                "description": "We have determined that we will not resolve the issue."
            },
            {
                "id": 2020412015,
                "node_id": "MDU6TGFiZWwyMDIwNDEyMDE1",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/closed-for-staleness",
                "name": "closed-for-staleness",
                "color": "eeeeee",
                "default": false,
                "description": ""
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "debora-ito",
            "id": 476307,
            "node_id": "MDQ6VXNlcjQ3NjMwNw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/476307?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/debora-ito",
            "html_url": "https://github.com/debora-ito",
            "followers_url": "https://api.github.com/users/debora-ito/followers",
            "following_url": "https://api.github.com/users/debora-ito/following{/other_user}",
            "gists_url": "https://api.github.com/users/debora-ito/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/debora-ito/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/debora-ito/subscriptions",
            "organizations_url": "https://api.github.com/users/debora-ito/orgs",
            "repos_url": "https://api.github.com/users/debora-ito/repos",
            "events_url": "https://api.github.com/users/debora-ito/events{/privacy}",
            "received_events_url": "https://api.github.com/users/debora-ito/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "debora-ito",
                "id": 476307,
                "node_id": "MDQ6VXNlcjQ3NjMwNw==",
                "avatar_url": "https://avatars.githubusercontent.com/u/476307?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/debora-ito",
                "html_url": "https://github.com/debora-ito",
                "followers_url": "https://api.github.com/users/debora-ito/followers",
                "following_url": "https://api.github.com/users/debora-ito/following{/other_user}",
                "gists_url": "https://api.github.com/users/debora-ito/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/debora-ito/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/debora-ito/subscriptions",
                "organizations_url": "https://api.github.com/users/debora-ito/orgs",
                "repos_url": "https://api.github.com/users/debora-ito/repos",
                "events_url": "https://api.github.com/users/debora-ito/events{/privacy}",
                "received_events_url": "https://api.github.com/users/debora-ito/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 1,
        "created_at": "2024-03-28T20:43:05Z",
        "updated_at": "2024-04-27T00:19:50Z",
        "closed_at": "2024-04-27T00:19:50Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\n\nIf you have a space in your SSO Session Name, auth doesn't work. The aws cli works fine, but the SDK doesn't recognize it.\n\n### Expected Behavior\n\nI expect auth to succeed\n\n### Current Behavior\n\nIf you run `aws configure sso` and give a sso session name of `FOO BAR`, you get this in your `~/.aws/config`:\r\n\r\n```\r\n[profile myprofile]\r\nsso_session = FOO BAR\r\n...\r\n[sso-session 'FOO BAR']\r\n...\r\n```\r\n\r\nThis works fine for the `aws` cli, but if you try to use this profile with the `ProfileCredentialsProvider`, you get this error:\r\n\r\n```\r\nCaused by: java.lang.IllegalArgumentException: Sso-session section not found with sso-session title FOO BAR.\r\n```\r\n\r\nEverything works if you remove the space and quotes from the config file.\n\n### Reproduction Steps\n\nSee \"current behavior\" above.\n\n### Possible Solution\n\n_No response_\n\n### Additional Information/Context\n\n_No response_\n\n### AWS Java SDK version used\n\n2.25.18\n\n### JDK version used\n\nopenjdk 17.0.10 2024-01-16 LTS\n\n### Operating System and version\n\nOSX 14.4.1",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5054/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5054/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5042",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5042/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5042/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5042/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/5042",
        "id": 2206569687,
        "node_id": "I_kwDOBa1eV86DhZTX",
        "number": 5042,
        "title": "CloudFrontUtilities clobbers port number if present when signing URLs",
        "user": {
            "login": "sagebind",
            "id": 2192863,
            "node_id": "MDQ6VXNlcjIxOTI4NjM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2192863?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sagebind",
            "html_url": "https://github.com/sagebind",
            "followers_url": "https://api.github.com/users/sagebind/followers",
            "following_url": "https://api.github.com/users/sagebind/following{/other_user}",
            "gists_url": "https://api.github.com/users/sagebind/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/sagebind/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/sagebind/subscriptions",
            "organizations_url": "https://api.github.com/users/sagebind/orgs",
            "repos_url": "https://api.github.com/users/sagebind/repos",
            "events_url": "https://api.github.com/users/sagebind/events{/privacy}",
            "received_events_url": "https://api.github.com/users/sagebind/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 4731221357,
                "node_id": "LA_kwDOBa1eV88AAAABGgC1bQ",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/p3",
                "name": "p3",
                "color": "F5DEB3",
                "default": false,
                "description": "This is a minor priority issue"
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 3,
        "created_at": "2024-03-25T19:49:46Z",
        "updated_at": "2024-05-15T17:48:22Z",
        "closed_at": "2024-05-15T17:48:05Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\n\nWhen signing a resource URL with `CloudFrontUtilities::getSignedUrlWithCannedPolicy`, if the given URL contains a port number in the authority, the signature will be generated based on the original string with the port, but the port will be stripped from the actual string that is returned. The signature will be invalid.\n\n### Expected Behavior\n\n`CloudFrontUtilities::getSignedUrlWithCannedPolicy` should not modify the URL authority that it is given.\n\n### Current Behavior\n\nCurrent behavior is that `CloudFrontUtilities::getSignedUrlWithCannedPolicy` always strips the port number from the authority given, after it has already generated a signature.\n\n### Reproduction Steps\n\n```java\r\nCloudFrontUtilities cloudFrontUtilities = CloudFrontUtilities.create();\r\n\r\nString urlToSign = \"https://abc.cloudfront.net:443/foo/bar.html\";\r\nString signedUrl = cloudFrontUtilities.getSignedUrlWithCannedPolicy(signer -> signer\r\n    .resourceUrl(uri.toString())\r\n    .keyPairId(keyName)\r\n    .privateKey(privateKey)\r\n    .expirationDate(normalizedExpires))\r\n    .url();\r\n\r\n// signedUrl will be \"https://abc.cloudfront.net/foo/bar.html\", but the signature was\r\n// signed for \"https://abc.cloudfront.net:443/foo/bar.html\".\r\nassert signedUrl.startsWith(urlToSign);\r\n```\n\n### Possible Solution\n\nWhen reconstructing the signed URL, use the original URL's authority string unmodified, or add conditional logic to append the port to the reconstructed URL if given.\r\n\r\nPossible implementation (untested):\r\n\r\n```diff\r\n             URI uri = URI.create(resourceUrl);\r\n             String protocol = uri.getScheme();\r\n             String domain = uri.getHost();\r\n+            String authority = uri.getAuthority();\r\n             String encodedPath = uri.getRawPath()\r\n                                  + (uri.getQuery() != null ? \"?\" + uri.getRawQuery() + \"&\" : \"?\")\r\n                                  + \"Expires=\" + request.expirationDate().getEpochSecond()\r\n                                  + \"&Signature=\" + urlSafeSignature\r\n                                  + \"&Key-Pair-Id=\" + request.keyPairId();\r\n             return DefaultSignedUrl.builder().protocol(protocol).domain(domain).encodedPath(encodedPath)\r\n-                                   .url(protocol + \"://\" + domain + encodedPath).build();\r\n+                                   .url(protocol + \"://\" + authority + encodedPath).build();\r\n```\n\n### Additional Information/Context\n\nWe sign \"dummy URLs\" in our unit and local application tests. These dummy URLs sometimes point to local servers and not real CloudFront hosts. This behavior broke such code when we upgraded from the AWS SDK for Java v1, since these local servers don't run on port 80 or 443.\r\n\r\nIn general, modifying the URL authority seems unexpected and unnecessary anyway.\n\n### AWS Java SDK version used\n\n2.24.13\n\n### JDK version used\n\n1.8.0_332\n\n### Operating System and version\n\nmacOS 13.6.5",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5042/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5042/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5038",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5038/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5038/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5038/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/5038",
        "id": 2205900101,
        "node_id": "I_kwDOBa1eV86De11F",
        "number": 5038,
        "title": "dom4j dependency needs to be updated to 2.x to run on Java 11+",
        "user": {
            "login": "smalers",
            "id": 6448274,
            "node_id": "MDQ6VXNlcjY0NDgyNzQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6448274?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/smalers",
            "html_url": "https://github.com/smalers",
            "followers_url": "https://api.github.com/users/smalers/followers",
            "following_url": "https://api.github.com/users/smalers/following{/other_user}",
            "gists_url": "https://api.github.com/users/smalers/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/smalers/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/smalers/subscriptions",
            "organizations_url": "https://api.github.com/users/smalers/orgs",
            "repos_url": "https://api.github.com/users/smalers/repos",
            "events_url": "https://api.github.com/users/smalers/events{/privacy}",
            "received_events_url": "https://api.github.com/users/smalers/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 1871569111,
                "node_id": "MDU6TGFiZWwxODcxNTY5MTEx",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/needs-triage",
                "name": "needs-triage",
                "color": "c7cafc",
                "default": false,
                "description": "This issue or PR still needs to be triaged."
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2024-03-25T14:30:27Z",
        "updated_at": "2024-03-25T18:08:21Z",
        "closed_at": "2024-03-25T18:08:02Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\n\nI have developed an application on Java 8 using the AWS SDK (`pom` has version 2.18.19 for the `software.amazon.awssdk` `bom`).  It is then deployed on Windows and Linux systems that run Java 8, 11, etc. Recently, a change in how the AWS SDK is being used in my code (new feature, etc.) has caused the following exception:\r\n\r\n```\r\nWARNING: An illegal reflective access operation has occurred\r\nWARNING: Illegal reflective access by org.dom4j.io.SAXContentHandler (file:/opt/tstool-14.9.3/bin/dom4j-1.6.1.jar) to method com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser$LocatorProxy.getEncoding()\r\nWARNING: Please consider reporting this to the maintainers of org.dom4j.io.SAXContentHandler\r\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\r\nWARNING: All illegal access operations will be denied in a future release\r\n```\r\n\r\n\n\n### Expected Behavior\n\nThe parsing of JSON web service responses should work with no problems.\n\n### Current Behavior\n\nThe illegal reflective access error is generated, which prevents the AWS SDK from working correctly.\n\n### Reproduction Steps\n\nI'm not sure of the exact trigger, but I am using the S3 and CloudFront AWS APIs.  It works fine on Java 8 with `dom4j-1.6.1` but running on Java 11 causes the problem.\n\n### Possible Solution\n\nI do not know exactly what is triggering this issue, but internet research indicates that the fix is to use `dom4j-2.1.4.jar` (or similar), which supports Java 11.  I have not tried running on Java versions newer than 11.  I downloaded the `dom4j-2.1.4.jar` file from Maven Central and replaced the 1.6.1 version that Maven includes in the installation.  This fixed the problem so I am moving on.  I'll try to figure out if I can modify the `pom` to use the newer version of the file and override what AWS SDK pulls in.  If the AWS SDK pom dependency is updated then I won't have to do the work-around.\n\n### Additional Information/Context\n\nThe software that I am using is complex so it is difficult to provide a snippet.  See the [AWS plugin code](https://github.com/OpenWaterFoundation/owf-tstool-aws-plugin/tree/main).\n\n### AWS Java SDK version used\n\n2.18.19\n\n### JDK version used\n\nOpenJDK 8 and 11\n\n### Operating System and version\n\nWindows (latest) and Linux Debian Bullseye.",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5038/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5038/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5032",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5032/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5032/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5032/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/5032",
        "id": 2201414153,
        "node_id": "I_kwDOBa1eV86DNuoJ",
        "number": 5032,
        "title": "S3 TransferManger CRT Client OOM on large file upload",
        "user": {
            "login": "thai-op",
            "id": 132942255,
            "node_id": "U_kgDOB-yJrw",
            "avatar_url": "https://avatars.githubusercontent.com/u/132942255?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/thai-op",
            "html_url": "https://github.com/thai-op",
            "followers_url": "https://api.github.com/users/thai-op/followers",
            "following_url": "https://api.github.com/users/thai-op/following{/other_user}",
            "gists_url": "https://api.github.com/users/thai-op/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/thai-op/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/thai-op/subscriptions",
            "organizations_url": "https://api.github.com/users/thai-op/orgs",
            "repos_url": "https://api.github.com/users/thai-op/repos",
            "events_url": "https://api.github.com/users/thai-op/events{/privacy}",
            "received_events_url": "https://api.github.com/users/thai-op/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 1871569111,
                "node_id": "MDU6TGFiZWwxODcxNTY5MTEx",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/needs-triage",
                "name": "needs-triage",
                "color": "c7cafc",
                "default": false,
                "description": "This issue or PR still needs to be triaged."
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 4,
        "created_at": "2024-03-21T23:55:17Z",
        "updated_at": "2024-03-22T02:28:34Z",
        "closed_at": "2024-03-22T02:28:17Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\n\nWe upload several big 12GB files to S3, and the JVM will OOM because of these:\r\n\r\n```\r\nS3TransferManager transferManager = S3TransferManager.builder().s3Client(S3AsyncClient\r\n                .crtBuilder().targetThroughputInGbps(20.0).minimumPartSizeInBytes(8 * MB).build())\r\n                .build();\r\n// then upload\r\nUploadDirectoryRequest uploadDirectoryRequest = UploadDirectoryRequest.builder()\r\n                    .bucket(outputBucket).s3Prefix(outputFile)\r\n                    .source(Paths.get(inputFile)).build();\r\n\r\nDirectoryUpload upload = transferManager.uploadDirectory(uploadDirectoryRequest);\r\nCompletedDirectoryUpload completedDirectoryUpload = upload.completionFuture().join();\n\n### Expected Behavior\n\nNot OOM on a 6gb container for uploading a 12GB file.\n\n### Current Behavior\n\nOOM\n\n### Reproduction Steps\n\nJVM 21 jre. Use 6gb container, JVM setting about the same, generate from large file then upload.\n\n### Possible Solution\n\n_No response_\n\n### Additional Information/Context\n\n_No response_\n\n### AWS Java SDK version used\n\n2.25.15\n\n### JDK version used\n\nopenjdk version \"21\" 2023-09-19 OpenJDK Runtime Environment (build 21+35-2513) OpenJDK 64-Bit Server VM (build 21+35-2513, mixed mode, sharing)\n\n### Operating System and version\n\nAmazon Linux amd64",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5032/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5032/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5023",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5023/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5023/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5023/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/5023",
        "id": 2189932184,
        "node_id": "I_kwDOBa1eV86Ch7aY",
        "number": 5023,
        "title": "OOM when using S3TransferManager.uploadDirectory() with 2 million files",
        "user": {
            "login": "jensvogt",
            "id": 132199303,
            "node_id": "U_kgDOB-Ezhw",
            "avatar_url": "https://avatars.githubusercontent.com/u/132199303?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jensvogt",
            "html_url": "https://github.com/jensvogt",
            "followers_url": "https://api.github.com/users/jensvogt/followers",
            "following_url": "https://api.github.com/users/jensvogt/following{/other_user}",
            "gists_url": "https://api.github.com/users/jensvogt/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jensvogt/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jensvogt/subscriptions",
            "organizations_url": "https://api.github.com/users/jensvogt/orgs",
            "repos_url": "https://api.github.com/users/jensvogt/repos",
            "events_url": "https://api.github.com/users/jensvogt/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jensvogt/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 4731218196,
                "node_id": "LA_kwDOBa1eV88AAAABGgCpFA",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/p1",
                "name": "p1",
                "color": "FF4500",
                "default": false,
                "description": "This is a high priority issue"
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 5,
        "created_at": "2024-03-16T11:53:22Z",
        "updated_at": "2024-03-28T16:51:43Z",
        "closed_at": "2024-03-28T16:51:06Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\n\nWhen uploading a directory to S3 using S3TransferManager.uploadDirectory() that contains hundreds of thousands of files, then it fails with OutOfMemoryError.\n\n### Expected Behavior\n\nS3TransferManager can work fine no matter how many files are in the directory tree.\n\n### Current Behavior\n\nxception in thread \"Thread-11\" Exception in thread \"Thread-24\" Exception in thread \"Thread-65\" Exception in thread \"sdk-async-response-0-24\" java.lang.OutOfMemoryError: Java heap space\r\njava.lang.OutOfMemoryError: Java heap space\r\njava.lang.OutOfMemoryError: Java heap space\r\njava.lang.OutOfMemoryError: Java heap space\r\njava.lang.OutOfMemoryError: Java heap space\n\n### Reproduction Steps\n\npackage org.example;\r\n\r\nimport org.apache.commons.lang3.RandomStringUtils;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport software.amazon.awssdk.auth.credentials.ProfileCredentialsProvider;\r\nimport software.amazon.awssdk.regions.Region;\r\nimport software.amazon.awssdk.services.s3.S3AsyncClient;\r\nimport software.amazon.awssdk.services.s3.S3Client;\r\nimport software.amazon.awssdk.services.s3.internal.crt.S3CrtAsyncClient;\r\nimport software.amazon.awssdk.services.s3.model.CreateBucketRequest;\r\nimport software.amazon.awssdk.services.s3.model.HeadBucketRequest;\r\nimport software.amazon.awssdk.services.s3.model.NoSuchBucketException;\r\nimport software.amazon.awssdk.transfer.s3.S3TransferManager;\r\nimport software.amazon.awssdk.transfer.s3.model.CompletedDirectoryUpload;\r\nimport software.amazon.awssdk.transfer.s3.model.UploadDirectoryRequest;\r\n\r\nimport java.io.BufferedWriter;\r\nimport java.io.File;\r\nimport java.io.FileWriter;\r\nimport java.io.IOException;\r\nimport java.net.URI;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Path;\r\n\r\npublic class Main {\r\n\r\n    private static Path parentDir;\r\n    private static final String LOCALSTACK_ENDPOINT = \"http://localhost:4566\";\r\n    private static final Region LOCALSTACK_REGION = Region.EU_CENTRAL_1;\r\n    private static final String BUCKET = \"test-bucket\";\r\n    private static final int FILE_COUNT = 2000000;\r\n    private static final Logger LOG = LoggerFactory.getLogger(Main.class);\r\n\r\n    private static S3Client s3Client;\r\n\r\n    private static S3TransferManager s3TransferManager;\r\n\r\n    private static void setupAws() {\r\n        S3AsyncClient s3AsyncClient = S3CrtAsyncClient.builder()\r\n                .endpointOverride(URI.create(LOCALSTACK_ENDPOINT))\r\n                .region(LOCALSTACK_REGION)\r\n                .credentialsProvider(ProfileCredentialsProvider.create())\r\n                .forcePathStyle(true)\r\n                .targetThroughputInGbps(10d)\r\n                .maxNativeMemoryLimitInBytes((long) 1024 * 1024 * 1024)\r\n                .maxConcurrency(10)\r\n                .build();\r\n        s3TransferManager = S3TransferManager.builder().s3Client(s3AsyncClient).build();\r\n        s3Client = S3Client.builder()\r\n                .endpointOverride(URI.create(LOCALSTACK_ENDPOINT))\r\n                .forcePathStyle(true)\r\n                .region(LOCALSTACK_REGION)\r\n                .credentialsProvider(ProfileCredentialsProvider.create())\r\n                .build();\r\n    }\r\n\r\n    private static boolean bucketExists(String bucket) {\r\n        HeadBucketRequest headBucketRequest = HeadBucketRequest.builder()\r\n                .bucket(bucket)\r\n                .build();\r\n\r\n        try {\r\n            s3Client.headBucket(headBucketRequest);\r\n            return true;\r\n        } catch (NoSuchBucketException e) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    private static void setupBucket() {\r\n        if (!bucketExists(Main.BUCKET)) {\r\n            s3Client.createBucket(CreateBucketRequest.builder().bucket(Main.BUCKET).build());\r\n        }\r\n    }\r\n\r\n    private static void setupFiles() throws IOException {\r\n        parentDir = Files.createTempDirectory(\"aws-s3\");\r\n        for (int i = 0; i < Main.FILE_COUNT; i++) {\r\n            File file = new File(parentDir.toString() + File.separator + \"random\" + i + \".txt\");\r\n            try {\r\n                FileWriter writesToFile = new FileWriter(file);\r\n                BufferedWriter writer = new BufferedWriter(writesToFile);\r\n                writer.write(RandomStringUtils.random(256, true, true) + \"\\n\");\r\n                writer.close();\r\n            } catch (IOException e) {\r\n                System.exit(0);\r\n            }\r\n        }\r\n    }\r\n\r\n    private static void uploadFiles(String bucket, String prefix, Path sourceDir) {\r\n        CompletedDirectoryUpload completedDirectoryUpload =\r\n                s3TransferManager\r\n                        .uploadDirectory(\r\n                                UploadDirectoryRequest.builder()\r\n                                        .bucket(bucket)\r\n                                        .s3Prefix(prefix)\r\n                                        .source(sourceDir)\r\n                                        .build())\r\n                        .completionFuture()\r\n                        .join();\r\n\r\n        if (!completedDirectoryUpload.failedTransfers().isEmpty()) {\r\n            Throwable exception = completedDirectoryUpload.failedTransfers().get(0).exception();\r\n            String msg = String.format(\"Some files failed ({%d}x) to upload with directory upload. One exception was: {%s}\",\r\n                    completedDirectoryUpload.failedTransfers().size(), exception.getMessage());\r\n            throw new RuntimeException(msg, exception);\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) throws IOException {\r\n\r\n        setupAws();\r\n        LOG.info(\"AWS initialized\");\r\n\r\n        setupBucket();\r\n        LOG.info(\"Bucket created: {}\", BUCKET);\r\n\r\n        setupFiles();\r\n        LOG.info(\"Files created: {}\", FILE_COUNT);\r\n\r\n        uploadFiles(BUCKET, \"\", parentDir);\r\n        LOG.info(\"Files uploaded: {}\", FILE_COUNT);\r\n    }\r\n}\n\n### Possible Solution\n\nDo not collect a List of CompletableFutures, because this will result in a huge in-memory collection, in case the directory tree has millions of files. In our case we have a flat directory tree (only one directory with 2mio small XML files).\r\n\r\n```\r\nprivate void doUploadDirectory(CompletableFuture<CompletedDirectoryUpload> returnFuture,\r\n                                   UploadDirectoryRequest uploadDirectoryRequest) {\r\n\r\n        Path directory = uploadDirectoryRequest.source();\r\n\r\n        validateDirectory(uploadDirectoryRequest);\r\n\r\n        Collection<FailedFileUpload> failedFileUploads = new ConcurrentLinkedQueue<>();\r\n        List<CompletableFuture<CompletedFileUpload>> futures;\r\n\r\n        try (Stream<Path> entries = listFiles(directory, uploadDirectoryRequest)) {\r\n            futures = entries.map(path -> {\r\n                CompletableFuture<CompletedFileUpload> future = uploadSingleFile(uploadDirectoryRequest,\r\n                                                                                 failedFileUploads, path);\r\n\r\n                // Forward cancellation of the return future to all individual futures.\r\n                CompletableFutureUtils.forwardExceptionTo(returnFuture, future);\r\n                return future;\r\n            }).collect(Collectors.toList());\r\n        }\r\n\r\n        // Here we should have a in-memory list of 2mio CompleteableFutures, but it will never come to this point, as a OOM will happen above, because the memory allocation for the collection will fail in case of 2 mio files.\r\n        CompletableFuture.allOf(futures.toArray(new CompletableFuture[0]))\r\n                         .whenComplete((r, t) -> returnFuture.complete(CompletedDirectoryUpload.builder()\r\n                                                                                               .failedTransfers(failedFileUploads)\r\n                                                                                               .build()));\r\n    }\r\n```\n\n### Additional Information/Context\n\nActually, this is not a memory leak, its just a bad design. In v1 you collection the directory tree in a in-memory ArrayList. This has been fixed, as you use a directory streams in v2. Nevertheless, now a huge in-memory list of CompleteableFutures is created.\n\n### AWS Java SDK version used\n\n2.25.10\n\n### JDK version used\n\nopenjdk version \"17.0.10\" 2024-01-16 OpenJDK Runtime Environment (build 17.0.10+7-Debian-1deb12u1) OpenJDK 64-Bit Server VM (build 17.0.10+7-Debian-1deb12u1, mixed mode, sharing)\n\n### Operating System and version\n\nDebian12 (bookworm)",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5023/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/5023/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4999",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4999/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4999/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4999/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/4999",
        "id": 2172831151,
        "node_id": "I_kwDOBa1eV86BgsWv",
        "number": 4999,
        "title": "Memory Leak in S3TransferManager",
        "user": {
            "login": "HarmanBhutani",
            "id": 11242265,
            "node_id": "MDQ6VXNlcjExMjQyMjY1",
            "avatar_url": "https://avatars.githubusercontent.com/u/11242265?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/HarmanBhutani",
            "html_url": "https://github.com/HarmanBhutani",
            "followers_url": "https://api.github.com/users/HarmanBhutani/followers",
            "following_url": "https://api.github.com/users/HarmanBhutani/following{/other_user}",
            "gists_url": "https://api.github.com/users/HarmanBhutani/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/HarmanBhutani/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/HarmanBhutani/subscriptions",
            "organizations_url": "https://api.github.com/users/HarmanBhutani/orgs",
            "repos_url": "https://api.github.com/users/HarmanBhutani/repos",
            "events_url": "https://api.github.com/users/HarmanBhutani/events{/privacy}",
            "received_events_url": "https://api.github.com/users/HarmanBhutani/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 1326720995,
                "node_id": "MDU6TGFiZWwxMzI2NzIwOTk1",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/response-requested",
                "name": "response-requested",
                "color": "666666",
                "default": false,
                "description": "Waiting on additional info and feedback. Will move to \"closing-soon\" in 10 days."
            },
            {
                "id": 2020412015,
                "node_id": "MDU6TGFiZWwyMDIwNDEyMDE1",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/closed-for-staleness",
                "name": "closed-for-staleness",
                "color": "eeeeee",
                "default": false,
                "description": ""
            },
            {
                "id": 3727605076,
                "node_id": "LA_kwDOBa1eV87eLr1U",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/crt-client",
                "name": "crt-client",
                "color": "FBCA04",
                "default": false,
                "description": ""
            },
            {
                "id": 4731218196,
                "node_id": "LA_kwDOBa1eV88AAAABGgCpFA",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/p1",
                "name": "p1",
                "color": "FF4500",
                "default": false,
                "description": "This is a high priority issue"
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "debora-ito",
            "id": 476307,
            "node_id": "MDQ6VXNlcjQ3NjMwNw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/476307?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/debora-ito",
            "html_url": "https://github.com/debora-ito",
            "followers_url": "https://api.github.com/users/debora-ito/followers",
            "following_url": "https://api.github.com/users/debora-ito/following{/other_user}",
            "gists_url": "https://api.github.com/users/debora-ito/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/debora-ito/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/debora-ito/subscriptions",
            "organizations_url": "https://api.github.com/users/debora-ito/orgs",
            "repos_url": "https://api.github.com/users/debora-ito/repos",
            "events_url": "https://api.github.com/users/debora-ito/events{/privacy}",
            "received_events_url": "https://api.github.com/users/debora-ito/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "debora-ito",
                "id": 476307,
                "node_id": "MDQ6VXNlcjQ3NjMwNw==",
                "avatar_url": "https://avatars.githubusercontent.com/u/476307?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/debora-ito",
                "html_url": "https://github.com/debora-ito",
                "followers_url": "https://api.github.com/users/debora-ito/followers",
                "following_url": "https://api.github.com/users/debora-ito/following{/other_user}",
                "gists_url": "https://api.github.com/users/debora-ito/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/debora-ito/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/debora-ito/subscriptions",
                "organizations_url": "https://api.github.com/users/debora-ito/orgs",
                "repos_url": "https://api.github.com/users/debora-ito/repos",
                "events_url": "https://api.github.com/users/debora-ito/events{/privacy}",
                "received_events_url": "https://api.github.com/users/debora-ito/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 8,
        "created_at": "2024-03-07T02:50:51Z",
        "updated_at": "2024-03-28T15:05:42Z",
        "closed_at": "2024-03-28T15:05:42Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\n\nI have tried to use S3TransferManager using files to upload big-sized documents, but I can see a memory leak in my ECS cluster . Files are supposed to be more memory stable.  I am closing and deleting files after successfully uploading.\r\nThe increased memory is never Garbage Collected as well. \r\n\r\nCan you please suggest what is the right way or fix to stop memory leaks?\r\n\n\n### Expected Behavior\n\nS3TransferManager should not leak any memory.\n\n### Current Behavior\n\nS3TransferManager is leaking memory during file upload .\n\n### Reproduction Steps\n\nS3AsyncClient s3AsyncClient = S3AsyncClient.crtBuilder()\r\n                                                   .credentialsProvider(DefaultCredentialsProvider.create())\r\n                                                   .region(Region.US_WEST_2)\r\n                                                   .targetThroughputInGbps(20.0)\r\n                                                   .minimumPartSizeInBytes(8 * MB)\r\n                                                   .build();\r\n\r\n        S3TransferManager transferManager =\r\n            S3TransferManager.builder()\r\n                             .s3AsyncClient(s3AsyncClient)\r\n                             .build();\r\n\r\nUploadFileRequest uploadFileRequest = UploadFileRequest.builder()\r\n                                                               .putObjectRequest(req -> req.bucket(\"bucket\").key(\"key\"))\r\n                                                               .addTransferListener(LoggingTransferListener.create())\r\n                                                               .source(Paths.get(\"myFile.txt\"))\r\n                                                               .build();\r\n\r\n        FileUpload upload = transferManager.uploadFile(uploadFileRequest);\r\n        upload.completionFuture().join();\r\n\n\n### Possible Solution\n\n_No response_\n\n### Additional Information/Context\n\n_No response_\n\n### AWS Java SDK version used\n\n2.22.12\n\n### JDK version used\n\n17\n\n### Operating System and version\n\nLinux Ubuntu 23.04",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4999/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4999/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4997",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4997/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4997/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4997/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/4997",
        "id": 2172552805,
        "node_id": "I_kwDOBa1eV86BfoZl",
        "number": 4997,
        "title": "Timestream client times out in Lambda with VPC",
        "user": {
            "login": "leandrokemp",
            "id": 41006452,
            "node_id": "MDQ6VXNlcjQxMDA2NDUy",
            "avatar_url": "https://avatars.githubusercontent.com/u/41006452?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/leandrokemp",
            "html_url": "https://github.com/leandrokemp",
            "followers_url": "https://api.github.com/users/leandrokemp/followers",
            "following_url": "https://api.github.com/users/leandrokemp/following{/other_user}",
            "gists_url": "https://api.github.com/users/leandrokemp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/leandrokemp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/leandrokemp/subscriptions",
            "organizations_url": "https://api.github.com/users/leandrokemp/orgs",
            "repos_url": "https://api.github.com/users/leandrokemp/repos",
            "events_url": "https://api.github.com/users/leandrokemp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/leandrokemp/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 1871569111,
                "node_id": "MDU6TGFiZWwxODcxNTY5MTEx",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/needs-triage",
                "name": "needs-triage",
                "color": "c7cafc",
                "default": false,
                "description": "This issue or PR still needs to be triaged."
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2024-03-06T22:27:45Z",
        "updated_at": "2024-03-07T01:16:10Z",
        "closed_at": "2024-03-07T01:15:46Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\n\nWhen creating the Timestream client from a Lambda with a VPC with private subnets (without internet access), it times out, even though the VPC has an endpoint for Timestream query/ingest.\r\n\r\nCreating the client with the Lambda associated with a VPC with public subnets (with internet access) works.\r\nHowever, as there is a VPC endpoint available for Timestream, so it should work from a private subnet as well.\r\n \r\nIt works when running it locally as it's not associated with any VPC. It only fails when running it in the AWS environment. \n\n### Expected Behavior\n\nBe able to create the Timestream (query/ingest) client from a VPC with private subnets without timing out if the VPC has Timestream endpoint configured.\n\n### Current Behavior\n\nIt fails when trying to create the Timestream client with the error below:\r\n\r\n\tat lambdainternal.EventHandlerLoader$2.call(EventHandlerLoader.java:925)\r\n\tat lambdainternal.AWSLambda.startRuntime(AWSLambda.java:268)\r\n\tat lambdainternal.AWSLambda.startRuntime(AWSLambda.java:207)\r\n\tat lambdainternal.AWSLambda.main(AWSLambda.java:196)\r\nCaused by: software.amazon.awssdk.core.exception.SdkClientException: Unable to execute HTTP request: connect timed out\r\n\tat software.amazon.awssdk.core.exception.SdkClientException$BuilderImpl.build(SdkClientException.java:111)\r\n\tat software.amazon.awssdk.core.exception.SdkClientException.create(SdkClientException.java:47)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.utils.RetryableStageHelper.setLastException(RetryableStageHelper.java:223)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage.execute(RetryableStage.java:83)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage.execute(RetryableStage.java:36)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n\tat software.amazon.awssdk.core.internal.http.StreamManagingStage.execute(StreamManagingStage.java:56)\r\n\tat software.amazon.awssdk.core.internal.http.StreamManagingStage.execute(StreamManagingStage.java:36)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.executeWithTimer(ApiCallTimeoutTrackingStage.java:80)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.execute(ApiCallTimeoutTrackingStage.java:60)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.execute(ApiCallTimeoutTrackingStage.java:42)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallMetricCollectionStage.execute(ApiCallMetricCollectionStage.java:48)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallMetricCollectionStage.execute(ApiCallMetricCollectionStage.java:31)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ExecutionFailureExceptionReportingStage.execute(ExecutionFailureExceptionReportingStage.java:37)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ExecutionFailureExceptionReportingStage.execute(ExecutionFailureExceptionReportingStage.java:26)\r\n\tat software.amazon.awssdk.core.internal.http.AmazonSyncHttpClient$RequestExecutionBuilderImpl.execute(AmazonSyncHttpClient.java:193)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.invoke(BaseSyncClientHandler.java:103)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.doExecute(BaseSyncClientHandler.java:171)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.lambda$execute$1(BaseSyncClientHandler.java:82)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.measureApiCallSuccess(BaseSyncClientHandler.java:179)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.execute(BaseSyncClientHandler.java:76)\r\n\tat software.amazon.awssdk.core.client.handler.SdkSyncClientHandler.execute(SdkSyncClientHandler.java:45)\r\n\tat software.amazon.awssdk.awscore.client.handler.AwsSyncClientHandler.execute(AwsSyncClientHandler.java:56)\r\n\tat software.amazon.awssdk.services.timestreamquery.DefaultTimestreamQueryClient.query(DefaultTimestreamQueryClient.java:1136)\r\n\tat software.amazon.awssdk.services.timestreamquery.paginators.QueryIterable$QueryResponseFetcher.nextPage(QueryIterable.java:133)\r\n\tat software.amazon.awssdk.services.timestreamquery.paginators.QueryIterable$QueryResponseFetcher.nextPage(QueryIterable.java:124)\r\n\tat software.amazon.awssdk.core.pagination.sync.PaginatedResponsesIterator.next(PaginatedResponsesIterator.java:58)\r\n\tat com.enel.tflex.core.data.timestream.QueryExecutor.runQuery(QueryExecutor.java:54)\r\n\t... 8 more\r\n\tSuppressed: software.amazon.awssdk.core.exception.SdkClientException: Request attempt 1 failure: Unable to execute HTTP request: connect timed out\r\n\tSuppressed: software.amazon.awssdk.core.exception.SdkClientException: Request attempt 2 failure: Unable to execute HTTP request: connect timed out\r\n\tSuppressed: software.amazon.awssdk.core.exception.SdkClientException: Request attempt 3 failure: Unable to execute HTTP request: connect timed out\r\nCaused by: java.net.SocketTimeoutException: connect timed out\r\n\tat java.base/java.net.PlainSocketImpl.socketConnect(Native Method)\r\n\tat java.base/java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)\r\n\tat java.base/java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)\r\n\tat java.base/java.net.AbstractPlainSocketImpl.connect(Unknown Source)\r\n\tat java.base/java.net.SocksSocketImpl.connect(Unknown Source)\r\n\tat java.base/java.net.Socket.connect(Unknown Source)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.connect(Unknown Source)\r\n\tat java.base/sun.net.NetworkClient.doConnect(Unknown Source)\r\n\tat java.base/sun.net.www.http.HttpClient.openServer(Unknown Source)\r\n\tat java.base/sun.net.www.http.HttpClient.openServer(Unknown Source)\r\n\tat java.base/sun.net.www.protocol.https.HttpsClient.<init>(Unknown Source)\r\n\tat java.base/sun.net.www.protocol.https.HttpsClient.New(Unknown Source)\r\n\tat java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(Unknown Source)\r\n\tat java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(Unknown Source)\r\n\tat java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)\r\n\tat java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(Unknown Source)\r\n\tat java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.connect(Unknown Source)\r\n\tat software.amazon.awssdk.http.urlconnection.UrlConnectionHttpClient$RequestCallable.call(UrlConnectionHttpClient.java:291)\r\n\tat software.amazon.awssdk.http.urlconnection.UrlConnectionHttpClient$RequestCallable.call(UrlConnectionHttpClient.java:269)\r\n\tat software.amazon.awssdk.core.internal.util.MetricUtils.measureDurationUnsafe(MetricUtils.java:63)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.MakeHttpRequestStage.executeHttpRequest(MakeHttpRequestStage.java:77)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.MakeHttpRequestStage.execute(MakeHttpRequestStage.java:56)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.MakeHttpRequestStage.execute(MakeHttpRequestStage.java:39)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:73)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:42)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:78)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:40)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:50)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:36)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage.execute(RetryableStage.java:81)\r\n\t... 34 more\r\n\n\n### Reproduction Steps\n\n- Create a Java Lambda with a Timestream (query or ingest) client using the AWS SDK V2\r\n- Grant the Lambda the proper Timestream query/ingest policies\r\n- Create a VPC with private subnets (no internet access)\r\n- Add the VPC Timestream (query or ingest) endpoints\r\n- Run the Lambda\r\n- It will time out when trying to create the Timestream client\n\n### Possible Solution\n\n_No response_\n\n### Additional Information/Context\n\n_No response_\n\n### AWS Java SDK version used\n\n2.23.12\n\n### JDK version used\n\n11\n\n### Operating System and version\n\nAWS Lambda container with VPC (it works locally)",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4997/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4997/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4991",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4991/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4991/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4991/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/4991",
        "id": 2171435837,
        "node_id": "I_kwDOBa1eV86BbXs9",
        "number": 4991,
        "title": "Aws Java sdk v2 thread leak",
        "user": {
            "login": "sid22",
            "id": 17125030,
            "node_id": "MDQ6VXNlcjE3MTI1MDMw",
            "avatar_url": "https://avatars.githubusercontent.com/u/17125030?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sid22",
            "html_url": "https://github.com/sid22",
            "followers_url": "https://api.github.com/users/sid22/followers",
            "following_url": "https://api.github.com/users/sid22/following{/other_user}",
            "gists_url": "https://api.github.com/users/sid22/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/sid22/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/sid22/subscriptions",
            "organizations_url": "https://api.github.com/users/sid22/orgs",
            "repos_url": "https://api.github.com/users/sid22/repos",
            "events_url": "https://api.github.com/users/sid22/events{/privacy}",
            "received_events_url": "https://api.github.com/users/sid22/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 1326720995,
                "node_id": "MDU6TGFiZWwxMzI2NzIwOTk1",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/response-requested",
                "name": "response-requested",
                "color": "666666",
                "default": false,
                "description": "Waiting on additional info and feedback. Will move to \"closing-soon\" in 10 days."
            },
            {
                "id": 2020412015,
                "node_id": "MDU6TGFiZWwyMDIwNDEyMDE1",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/closed-for-staleness",
                "name": "closed-for-staleness",
                "color": "eeeeee",
                "default": false,
                "description": ""
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "debora-ito",
            "id": 476307,
            "node_id": "MDQ6VXNlcjQ3NjMwNw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/476307?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/debora-ito",
            "html_url": "https://github.com/debora-ito",
            "followers_url": "https://api.github.com/users/debora-ito/followers",
            "following_url": "https://api.github.com/users/debora-ito/following{/other_user}",
            "gists_url": "https://api.github.com/users/debora-ito/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/debora-ito/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/debora-ito/subscriptions",
            "organizations_url": "https://api.github.com/users/debora-ito/orgs",
            "repos_url": "https://api.github.com/users/debora-ito/repos",
            "events_url": "https://api.github.com/users/debora-ito/events{/privacy}",
            "received_events_url": "https://api.github.com/users/debora-ito/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "debora-ito",
                "id": 476307,
                "node_id": "MDQ6VXNlcjQ3NjMwNw==",
                "avatar_url": "https://avatars.githubusercontent.com/u/476307?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/debora-ito",
                "html_url": "https://github.com/debora-ito",
                "followers_url": "https://api.github.com/users/debora-ito/followers",
                "following_url": "https://api.github.com/users/debora-ito/following{/other_user}",
                "gists_url": "https://api.github.com/users/debora-ito/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/debora-ito/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/debora-ito/subscriptions",
                "organizations_url": "https://api.github.com/users/debora-ito/orgs",
                "repos_url": "https://api.github.com/users/debora-ito/repos",
                "events_url": "https://api.github.com/users/debora-ito/events{/privacy}",
                "received_events_url": "https://api.github.com/users/debora-ito/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 5,
        "created_at": "2024-03-06T12:51:57Z",
        "updated_at": "2024-04-02T21:05:27Z",
        "closed_at": "2024-04-02T21:05:27Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\n\nWe have a software running perpetually on a vm. We create new object of S3Client for jobs / processes internally as the d3 bucket, credentials change based on usage.\r\n\r\nWe use ApacheHttpClient when creating an object of S3Client. As part of that we set `useIdleConnectionReaper` to true to close unused s3 clients ( https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/http/apache/ApacheHttpClient.Builder.html#useIdleConnectionReaper(java.lang.Boolean) )\r\n\r\nWe were using Aws Java SDK v1 client earlier and did not face this issue.\r\nToggling back to v1 SDK the issue seems to be resolved. As we pass the object to different classes we cannot encapsulate it in Try { } block.\n\n### Expected Behavior\n\n`useIdleConnectionReaper` in ApacheHttpClient should close unused s3Client threads.\n\n### Current Behavior\n\nWe  see a lot of \u201csdk-ScheduledExecutor\u201d from jstack. \r\n```\r\n\"sdk-ScheduledExecutor-297-0\" #107305 daemon prio=5 os_prio=0 cpu=0.14ms elapsed=14.49s tid=0x00005633af0d0800 nid=0x176ce7 waiting on condition  [0x00007f4387d77000]\r\n   java.lang.Thread.State: TIMED_WAITING (parking)\r\n        at jdk.internal.misc.Unsafe.park(java.base@11.0.20/Native Method)\r\n        - parking to wait for  <0x00000005576a4ef8> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n        at java.util.concurrent.locks.LockSupport.parkNanos(java.base@11.0.20/LockSupport.java:234)\r\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(java.base@11.0.20/AbstractQueuedSynchronizer.java:2123)\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(java.base@11.0.20/ScheduledThreadPoolExecutor.java:1182)\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(java.base@11.0.20/ScheduledThreadPoolExecutor.java:899)\r\n        at java.util.concurrent.ThreadPoolExecutor.getTask(java.base@11.0.20/ThreadPoolExecutor.java:1054)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(java.base@11.0.20/ThreadPoolExecutor.java:1114)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(java.base@11.0.20/ThreadPoolExecutor.java:628)\r\n        at java.lang.Thread.run(java.base@11.0.20/Thread.java:829)\r\n```\r\n\r\n\n\n### Reproduction Steps\n\nclient =  \r\n      S3Client\r\n        .builder()\r\n        .credentialsProvider(\r\n          credentials.getAwsV2CredentialsProvider\r\n        )\r\n        .httpClientBuilder(        ApacheHttpClient\r\n          .builder()\r\n          .useIdleConnectionReaper(true))\r\n        .build()\r\n\r\n\r\nclient.putObject(\r\n    putObjectRequest,\r\n    RequestBody.fromInputStream(stream, size)\r\n  )\r\n\n\n### Possible Solution\n\n_No response_\n\n### Additional Information/Context\n\n_No response_\n\n### AWS Java SDK version used\n\n2.20.121\n\n### JDK version used\n\nAzul 11.0.19\n\n### Operating System and version\n\nUbuntu 20 LTS",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4991/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4991/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4990",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4990/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4990/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4990/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/4990",
        "id": 2169188905,
        "node_id": "I_kwDOBa1eV86BSzIp",
        "number": 4990,
        "title": "S3 ObjectMetadataInterceptor throws NullPointerException if metadata values are null",
        "user": {
            "login": "lukas-riedler-dynatrace",
            "id": 157790956,
            "node_id": "U_kgDOCWey7A",
            "avatar_url": "https://avatars.githubusercontent.com/u/157790956?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/lukas-riedler-dynatrace",
            "html_url": "https://github.com/lukas-riedler-dynatrace",
            "followers_url": "https://api.github.com/users/lukas-riedler-dynatrace/followers",
            "following_url": "https://api.github.com/users/lukas-riedler-dynatrace/following{/other_user}",
            "gists_url": "https://api.github.com/users/lukas-riedler-dynatrace/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/lukas-riedler-dynatrace/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/lukas-riedler-dynatrace/subscriptions",
            "organizations_url": "https://api.github.com/users/lukas-riedler-dynatrace/orgs",
            "repos_url": "https://api.github.com/users/lukas-riedler-dynatrace/repos",
            "events_url": "https://api.github.com/users/lukas-riedler-dynatrace/events{/privacy}",
            "received_events_url": "https://api.github.com/users/lukas-riedler-dynatrace/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 4731219696,
                "node_id": "LA_kwDOBa1eV88AAAABGgCu8A",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/p2",
                "name": "p2",
                "color": "FF8C00",
                "default": false,
                "description": "This is a standard priority issue"
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 4,
        "created_at": "2024-03-05T13:03:04Z",
        "updated_at": "2024-06-11T20:14:39Z",
        "closed_at": "2024-06-11T20:14:22Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\r\n\r\nThe newly added S3 \"Trim object metadata keys for PUT and MPU\" (https://github.com/aws/aws-sdk-java-v2/pull/4902) causes `PutObject` requests to throw a NPE when trying to upload files with `null` as a value in the metadata map.\r\n\r\nReading the metadata still works fine with `null` values.\r\n\r\n### Expected Behavior\r\n\r\nThat this does not throw for `null` values in the metadata map and simply works, just as it has in the past.\r\n\r\n### Current Behavior\r\n\r\nStacktrace from our system when trying to update to 2.24.2 or newer\r\n```\r\nCaused by: java.util.concurrent.CompletionException: java.lang.NullPointerException\r\n\tat java.base/java.util.concurrent.CompletableFuture.encodeThrowable(Unknown Source)\r\n\tat java.base/java.util.concurrent.CompletableFuture.completeThrowable(Unknown Source)\r\n\tat java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(Unknown Source)\r\n\tat java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(Unknown Source)\r\n\tat java.base/java.util.concurrent.CompletableFuture.whenComplete(Unknown Source)\r\n\tat software.amazon.awssdk.services.s3.DefaultS3AsyncClient.putObject(DefaultS3AsyncClient.java:11142)\r\n\tat software.amazon.awssdk.services.s3.S3AsyncClient.putObject(S3AsyncClient.java:18623)\r\n\tat <sanitized>\r\n\tat <sanitized>\r\n\tat <sanitized>\r\n\t... 181 common frames omitted\r\nCaused by: java.lang.NullPointerException: null\r\n\tat java.base/java.util.Objects.requireNonNull(Unknown Source)\r\n\tat java.base/java.util.stream.Collectors.lambda$uniqKeysMapAccumulator$1(Unknown Source)\r\n\tat java.base/java.util.stream.ReduceOps$3ReducingSink.accept(Unknown Source)\r\n\tat java.base/java.util.Collections$UnmodifiableMap$UnmodifiableEntrySet.lambda$entryConsumer$0(Unknown Source)\r\n\tat java.base/java.util.Iterator.forEachRemaining(Unknown Source)\r\n\tat java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Unknown Source)\r\n\tat java.base/java.util.Collections$UnmodifiableMap$UnmodifiableEntrySet$UnmodifiableEntrySetSpliterator.forEachRemaining(Unknown Source)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(Unknown Source)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(Unknown Source)\r\n\tat java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(Unknown Source)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(Unknown Source)\r\n\tat java.base/java.util.stream.ReferencePipeline.collect(Unknown Source)\r\n\tat software.amazon.awssdk.services.s3.internal.handlers.ObjectMetadataInterceptor.trimKeys(ObjectMetadataInterceptor.java:72)\r\n\tat software.amazon.awssdk.services.s3.internal.handlers.ObjectMetadataInterceptor.trimMetadataNames(ObjectMetadataInterceptor.java:56)\r\n\tat software.amazon.awssdk.services.s3.internal.handlers.ObjectMetadataInterceptor.modifyRequest(ObjectMetadataInterceptor.java:42)\r\n\tat software.amazon.awssdk.core.interceptor.ExecutionInterceptorChain.modifyRequest(ExecutionInterceptorChain.java:65)\r\n\tat software.amazon.awssdk.awscore.internal.AwsExecutionContextBuilder.runInitialInterceptors(AwsExecutionContextBuilder.java:240)\r\n\tat software.amazon.awssdk.awscore.internal.AwsExecutionContextBuilder.invokeInterceptorsAndCreateExecutionContext(AwsExecutionContextBuilder.java:130)\r\n\tat software.amazon.awssdk.awscore.client.handler.AwsAsyncClientHandler.invokeInterceptorsAndCreateExecutionContext(AwsAsyncClientHandler.java:63)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseAsyncClientHandler.lambda$execute$1(BaseAsyncClientHandler.java:75)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseAsyncClientHandler.measureApiCallSuccess(BaseAsyncClientHandler.java:294)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseAsyncClientHandler.execute(BaseAsyncClientHandler.java:73)\r\n\tat software.amazon.awssdk.awscore.client.handler.AwsAsyncClientHandler.execute(AwsAsyncClientHandler.java:49)\r\n\tat software.amazon.awssdk.services.s3.DefaultS3AsyncClient.putObject(DefaultS3AsyncClient.java:11125)\r\n\t... 185 common frames omitted\r\n```\r\n\r\n### Reproduction Steps\r\n\r\nsimply creating a PutObject request with a metadata map that has an entry with a `null` value will throw the NPE when the request is sent.\r\n\r\nor simply adapting the `software.amazon.awssdk.services.s3.internal.handlers.ObjectMetadataInterceptorTest` class to try and set the value to `null`, then the test will trow a NPE too.\r\n\r\npatch diff:\r\n```\r\nIndex: services/s3/src/test/java/software/amazon/awssdk/services/s3/internal/handlers/ObjectMetadataInterceptorTest.java\r\nIDEA additional info:\r\nSubsystem: com.intellij.openapi.diff.impl.patch.CharsetEP\r\n<+>UTF-8\r\n===================================================================\r\ndiff --git a/services/s3/src/test/java/software/amazon/awssdk/services/s3/internal/handlers/ObjectMetadataInterceptorTest.java b/services/s3/src/test/java/software/amazon/awssdk/services/s3/internal/handlers/ObjectMetadataInterceptorTest.java\r\n--- a/services/s3/src/test/java/software/amazon/awssdk/services/s3/internal/handlers/ObjectMetadataInterceptorTest.java\t(revision f7bf93004ff4eb0c48b7557b4f47f464ebded3a9)\r\n+++ b/services/s3/src/test/java/software/amazon/awssdk/services/s3/internal/handlers/ObjectMetadataInterceptorTest.java\t(date 1709630478617)\r\n@@ -20,6 +20,7 @@\r\n import static org.mockito.Mockito.mock;\r\n import static org.mockito.Mockito.when;\r\n \r\n+import java.util.HashMap;\r\n import java.util.List;\r\n import java.util.Map;\r\n import java.util.stream.Collectors;\r\n@@ -52,8 +53,8 @@\r\n     @ParameterizedTest\r\n     @MethodSource(\"testCases\")\r\n     public void modifyRequest_putObject_metadataKeysAreTrimmed(TestCase tc) {\r\n-        Map<String, String> metadata = tc.inputKeys.stream()\r\n-            .collect(Collectors.toMap(k -> k, k -> \"value\"));\r\n+        Map<String, String> metadata = new HashMap<>();\r\n+        tc.inputKeys.forEach(key -> metadata.put(key, null));\r\n \r\n         Context.ModifyHttpRequest ctx = mock(Context.ModifyHttpRequest.class);\r\n```\r\n\r\nstacktrace that occurs then:\r\n```\r\n[ERROR] software.amazon.awssdk.services.s3.internal.handlers.ObjectMetadataInterceptorTest.modifyRequest_putObject_metadataKeysAreTrimmed(TestCase)[4] -- Time elapsed: 0.009 s <<< ERROR!\r\njava.lang.NullPointerException\r\n        at java.base/java.util.Objects.requireNonNull(Objects.java:209)\r\n        at java.base/java.util.stream.Collectors.lambda$uniqKeysMapAccumulator$1(Collectors.java:180)\r\n        at java.base/java.util.stream.ReduceOps$3ReducingSink.accept(ReduceOps.java:169)\r\n        at java.base/java.util.Collections$UnmodifiableMap$UnmodifiableEntrySet.lambda$entryConsumer$0(Collections.java:1625)\r\n        at java.base/java.util.Iterator.forEachRemaining(Iterator.java:133)\r\n        at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1845)\r\n        at java.base/java.util.Collections$UnmodifiableMap$UnmodifiableEntrySet$UnmodifiableEntrySetSpliterator.forEachRemaining(Collections.java:1650)\r\n        at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n        at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n        at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)\r\n        at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n        at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)\r\n        at software.amazon.awssdk.services.s3.internal.handlers.ObjectMetadataInterceptor.trimKeys(ObjectMetadataInterceptor.java:72)\r\n        at software.amazon.awssdk.services.s3.internal.handlers.ObjectMetadataInterceptor.trimMetadataNames(ObjectMetadataInterceptor.java:56)\r\n        at software.amazon.awssdk.services.s3.internal.handlers.ObjectMetadataInterceptor.modifyRequest(ObjectMetadataInterceptor.java:42)\r\n        at software.amazon.awssdk.services.s3.internal.handlers.ObjectMetadataInterceptorTest.modifyRequest_putObject_metadataKeysAreTrimmed(ObjectMetadataInterceptorTest.java:70)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n        at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)\r\n        at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n        at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n        at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)\r\n        at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)\r\n        at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestTemplateMethod(TimeoutExtension.java:94)\r\n        at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)\r\n        at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)\r\n        at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n        at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n        at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n        at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n        at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)\r\n        at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)\r\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)\r\n        at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)\r\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)\r\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)\r\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\r\n        at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n        at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n        at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n        at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask$DefaultDynamicTestExecutor.execute(NodeTestTask.java:226)\r\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask$DefaultDynamicTestExecutor.execute(NodeTestTask.java:204)\r\n        at org.junit.jupiter.engine.descriptor.TestTemplateTestDescriptor.execute(TestTemplateTestDescriptor.java:142)\r\n        at org.junit.jupiter.engine.descriptor.TestTemplateTestDescriptor.lambda$execute$2(TestTemplateTestDescriptor.java:110)\r\n        at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n        at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n        at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n        at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n        at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)\r\n        at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n        at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)\r\n        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n        at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)\r\n        at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n        at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n        at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n        at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n        at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n        at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n        at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)\r\n        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n        at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n        at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n        at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n        at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n        at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n        at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n        at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n        at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)\r\n        at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n        at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n        at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n        at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n        at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n        at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n        at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n        at org.junit.jupiter.engine.descriptor.TestTemplateTestDescriptor.execute(TestTemplateTestDescriptor.java:110)\r\n        at org.junit.jupiter.engine.descriptor.TestTemplateTestDescriptor.execute(TestTemplateTestDescriptor.java:44)\r\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\r\n        at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n        at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n        at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n        at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n        at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n        at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n        at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n        at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n        at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n        at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n        at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n        at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n        at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n        at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n        at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n        at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n        at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)\r\n        at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)\r\n        at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)\r\n        at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)\r\n        at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)\r\n        at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)\r\n        at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n        at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\r\n        at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\r\n        at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)\r\n        at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\r\n        at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\r\n        at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\r\n        at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\r\n        at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n        at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\r\n        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\r\n```\r\n\r\n### Possible Solution\r\n\r\nReplace the `Collectors#toMap` in `software.amazon.awssdk.services.s3.internal.handlers.ObjectMetadataInterceptor` with something that can handle `null` values.\r\n\r\n### Additional Information/Context\r\n\r\n_No response_\r\n\r\n### AWS Java SDK version used\r\n\r\n2.24.2\r\n\r\n### JDK version used\r\n\r\nTemurin-17.0.9+9\r\n\r\n### Operating System and version\r\n\r\nWindows 11",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4990/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4990/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4989",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4989/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4989/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4989/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/4989",
        "id": 2168336217,
        "node_id": "I_kwDOBa1eV86BPi9Z",
        "number": 4989,
        "title": "AsyncResponseTransformer.toBlockingStream() infinitely prefetches data.",
        "user": {
            "login": "nikron",
            "id": 39123,
            "node_id": "MDQ6VXNlcjM5MTIz",
            "avatar_url": "https://avatars.githubusercontent.com/u/39123?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/nikron",
            "html_url": "https://github.com/nikron",
            "followers_url": "https://api.github.com/users/nikron/followers",
            "following_url": "https://api.github.com/users/nikron/following{/other_user}",
            "gists_url": "https://api.github.com/users/nikron/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/nikron/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/nikron/subscriptions",
            "organizations_url": "https://api.github.com/users/nikron/orgs",
            "repos_url": "https://api.github.com/users/nikron/repos",
            "events_url": "https://api.github.com/users/nikron/events{/privacy}",
            "received_events_url": "https://api.github.com/users/nikron/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 1871569111,
                "node_id": "MDU6TGFiZWwxODcxNTY5MTEx",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/needs-triage",
                "name": "needs-triage",
                "color": "c7cafc",
                "default": false,
                "description": "This issue or PR still needs to be triaged."
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 3,
        "created_at": "2024-03-05T05:34:07Z",
        "updated_at": "2024-03-06T21:24:09Z",
        "closed_at": "2024-03-06T21:23:53Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\n\nFrom reading the code and looking at behavior of when using the SDK for S3, I believe AsyncResponseTransformer.toBlockingStream() produces a stream that will store the all the data in memory if not consumed fast enough. This is a problem when downloading lots of data from S3 without being able to write it fast enough, and it causes out of memory issues. I believe there should be a limit on how much ByteBufferStoringSubscriber will accumulate.\n\n### Expected Behavior\n\nWhen reading faster than consuming with an input stream, I don't expect the input stream to buffer the entire remaining amount.\n\n### Current Behavior\n\nInput streams can buffer the full amount of data if not written fast enough.\n\n### Reproduction Steps\n\nI haven't tried this, but if my theory is right:\r\n\r\n1. Attempt to download a download a large object with S3 using blocking input stream\r\n2. Don't consume the input stream.\r\n3. The full data should reside in memory.\n\n### Possible Solution\n\nByteBufferStoringSubscriber or it's delegate should set a max number of bytes to store along with a minimum.\n\n### Additional Information/Context\n\nIt's possible that I'm getting out of memory errors from downloading too much data from S3 for a different reason, but this is what my debugging has lead me to.\n\n### AWS Java SDK version used\n\n2.24.1\n\n### JDK version used\n\n21\n\n### Operating System and version\n\nUbuntu 22.04",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4989/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4989/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4987",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4987/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4987/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4987/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/4987",
        "id": 2165825055,
        "node_id": "I_kwDOBa1eV86BF94f",
        "number": 4987,
        "title": "OOM when using S3TransferManager.downloadDirectory()",
        "user": {
            "login": "zzz8307",
            "id": 25875214,
            "node_id": "MDQ6VXNlcjI1ODc1MjE0",
            "avatar_url": "https://avatars.githubusercontent.com/u/25875214?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/zzz8307",
            "html_url": "https://github.com/zzz8307",
            "followers_url": "https://api.github.com/users/zzz8307/followers",
            "following_url": "https://api.github.com/users/zzz8307/following{/other_user}",
            "gists_url": "https://api.github.com/users/zzz8307/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/zzz8307/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/zzz8307/subscriptions",
            "organizations_url": "https://api.github.com/users/zzz8307/orgs",
            "repos_url": "https://api.github.com/users/zzz8307/repos",
            "events_url": "https://api.github.com/users/zzz8307/events{/privacy}",
            "received_events_url": "https://api.github.com/users/zzz8307/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 3727605076,
                "node_id": "LA_kwDOBa1eV87eLr1U",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/crt-client",
                "name": "crt-client",
                "color": "FBCA04",
                "default": false,
                "description": ""
            },
            {
                "id": 4731218196,
                "node_id": "LA_kwDOBa1eV88AAAABGgCpFA",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/p1",
                "name": "p1",
                "color": "FF4500",
                "default": false,
                "description": "This is a high priority issue"
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "debora-ito",
            "id": 476307,
            "node_id": "MDQ6VXNlcjQ3NjMwNw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/476307?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/debora-ito",
            "html_url": "https://github.com/debora-ito",
            "followers_url": "https://api.github.com/users/debora-ito/followers",
            "following_url": "https://api.github.com/users/debora-ito/following{/other_user}",
            "gists_url": "https://api.github.com/users/debora-ito/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/debora-ito/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/debora-ito/subscriptions",
            "organizations_url": "https://api.github.com/users/debora-ito/orgs",
            "repos_url": "https://api.github.com/users/debora-ito/repos",
            "events_url": "https://api.github.com/users/debora-ito/events{/privacy}",
            "received_events_url": "https://api.github.com/users/debora-ito/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "debora-ito",
                "id": 476307,
                "node_id": "MDQ6VXNlcjQ3NjMwNw==",
                "avatar_url": "https://avatars.githubusercontent.com/u/476307?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/debora-ito",
                "html_url": "https://github.com/debora-ito",
                "followers_url": "https://api.github.com/users/debora-ito/followers",
                "following_url": "https://api.github.com/users/debora-ito/following{/other_user}",
                "gists_url": "https://api.github.com/users/debora-ito/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/debora-ito/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/debora-ito/subscriptions",
                "organizations_url": "https://api.github.com/users/debora-ito/orgs",
                "repos_url": "https://api.github.com/users/debora-ito/repos",
                "events_url": "https://api.github.com/users/debora-ito/events{/privacy}",
                "received_events_url": "https://api.github.com/users/debora-ito/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 20,
        "created_at": "2024-03-04T03:03:10Z",
        "updated_at": "2024-03-26T16:42:24Z",
        "closed_at": "2024-03-26T16:42:04Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\n\nWhen downloading a directory from S3 using `S3TransferManager.downloadDirectory()` that contains hundreds of thousands of files then it fails with `OutOfMemoryError`.\r\n![image](https://github.com/aws/aws-sdk-java-v2/assets/25875214/7747cce6-de7e-4d07-9183-fa2c0af30567)\r\n\n\n### Expected Behavior\n\nS3TransferManager can work fine no matter how many files or how big the file is.\n\n### Current Behavior\n\nOOM after downloading some of the files.\r\n```\r\nCaused by: \r\nsoftware.amazon.awssdk.core.exception.SdkClientException: Failed to send request\r\n\tat software.amazon.awssdk.core.exception.SdkClientException$BuilderImpl.build(SdkClientException.java:111) ~[sdk-core-2.24.13.jar!/:na]\r\n\tat software.amazon.awssdk.core.exception.SdkClientException.create(SdkClientException.java:47) ~[sdk-core-2.24.13.jar!/:na]\r\n\tat software.amazon.awssdk.transfer.s3.internal.DownloadDirectoryHelper.lambda$doDownloadDirectory$2(DownloadDirectoryHelper.java:121) ~[s3-transfer-manager-2.24.13.jar!/:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:837) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088) ~[na:na]\r\n\tat software.amazon.awssdk.transfer.s3.internal.AsyncBufferingSubscriber.onError(AsyncBufferingSubscriber.java:79) ~[s3-transfer-manager-2.24.13.jar!/:na]\r\n\tat software.amazon.awssdk.utils.async.DelegatingSubscriber.onError(DelegatingSubscriber.java:40) ~[utils-2.24.13.jar!/:na]\r\n\tat software.amazon.awssdk.core.internal.pagination.async.ItemsSubscription.lambda$fetchNextPage$0(ItemsSubscription.java:89) ~[sdk-core-2.24.13.jar!/:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:837) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088) ~[na:na]\r\n\tat software.amazon.awssdk.utils.CompletableFutureUtils.lambda$forwardExceptionTo$0(CompletableFutureUtils.java:79) ~[utils-2.24.13.jar!/:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:837) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088) ~[na:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.AsyncApiCallMetricCollectionStage.lambda$execute$0(AsyncApiCallMetricCollectionStage.java:56) ~[sdk-core-2.24.13.jar!/:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:837) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088) ~[na:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.AsyncApiCallTimeoutTrackingStage.lambda$execute$2(AsyncApiCallTimeoutTrackingStage.java:67) ~[sdk-core-2.24.13.jar!/:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:837) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088) ~[na:na]\r\n\tat software.amazon.awssdk.utils.CompletableFutureUtils.lambda$forwardExceptionTo$0(CompletableFutureUtils.java:79) ~[utils-2.24.13.jar!/:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:837) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088) ~[na:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.AsyncRetryableStage$RetryingExecutor.maybeAttemptExecute(AsyncRetryableStage.java:103) ~[sdk-core-2.24.13.jar!/:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.AsyncRetryableStage$RetryingExecutor.maybeRetryExecute(AsyncRetryableStage.java:184) ~[sdk-core-2.24.13.jar!/:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.AsyncRetryableStage$RetryingExecutor.lambda$attemptExecute$1(AsyncRetryableStage.java:159) ~[sdk-core-2.24.13.jar!/:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:837) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088) ~[na:na]\r\n\tat software.amazon.awssdk.utils.CompletableFutureUtils.lambda$forwardExceptionTo$0(CompletableFutureUtils.java:79) ~[utils-2.24.13.jar!/:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:837) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088) ~[na:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.MakeAsyncHttpRequestStage.lambda$execute$0(MakeAsyncHttpRequestStage.java:108) ~[sdk-core-2.24.13.jar!/:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:837) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088) ~[na:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.MakeAsyncHttpRequestStage.completeResponseFuture(MakeAsyncHttpRequestStage.java:255) ~[sdk-core-2.24.13.jar!/:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.MakeAsyncHttpRequestStage.lambda$executeHttpRequest$3(MakeAsyncHttpRequestStage.java:167) ~[sdk-core-2.24.13.jar!/:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:930) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:907) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture$Completion.run(CompletableFuture.java:478) ~[na:na]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]\r\n\tat java.base/java.lang.Thread.run(Thread.java:829) ~[na:na]\r\nCaused by: java.util.concurrent.CompletionException: software.amazon.awssdk.core.exception.SdkClientException: Unable to execute HTTP request: Java heap space\r\n\tat software.amazon.awssdk.utils.CompletableFutureUtils.errorAsCompletionException(CompletableFutureUtils.java:65) ~[utils-2.24.13.jar!/:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.AsyncExecutionFailureExceptionReportingStage.lambda$execute$0(AsyncExecutionFailureExceptionReportingStage.java:51) ~[sdk-core-2.24.13.jar!/:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:930) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:907) ~[na:na]\r\n\t... 32 common frames omitted\r\nCaused by: software.amazon.awssdk.core.exception.SdkClientException: Unable to execute HTTP request: Java heap space\r\n\tat software.amazon.awssdk.core.exception.SdkClientException$BuilderImpl.build(SdkClientException.java:111) ~[sdk-core-2.24.13.jar!/:na]\r\n\tat software.amazon.awssdk.core.exception.SdkClientException.create(SdkClientException.java:47) ~[sdk-core-2.24.13.jar!/:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.utils.RetryableStageHelper.setLastException(RetryableStageHelper.java:223) ~[sdk-core-2.24.13.jar!/:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.utils.RetryableStageHelper.setLastException(RetryableStageHelper.java:218) ~[sdk-core-2.24.13.jar!/:na]\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.AsyncRetryableStage$RetryingExecutor.maybeRetryExecute(AsyncRetryableStage.java:182) ~[sdk-core-2.24.13.jar!/:na]\r\n\t... 23 common frames omitted\r\nCaused by: java.lang.OutOfMemoryError: Java heap space\r\n```\n\n### Reproduction Steps\n\n```java\r\nprivate final S3AsyncClient s3Client = S3AsyncClient.crtBuilder()\r\n        .region(Region.AP_EAST_1)\r\n        .build();\r\n\r\nprivate final S3TransferManager s3TransferManager = S3TransferManager.builder().s3Client(s3Client).build();\r\n\r\npublic Path downloadDirectory(Path path, String bucket, String key) {\r\n    CompletableFuture<CompletedDirectoryDownload> future = downloadDirectory(bucket, key, path)\r\n            .exceptionally(e -> {\r\n                throw new GeneralException(e);\r\n            });\r\n    CompletedDirectoryDownload completedDirectoryDownload = future.join();\r\n\r\n    List<FailedFileDownload> failedTransfers = completedDirectoryDownload.failedTransfers();\r\n    if (!failedTransfers.isEmpty()) {\r\n        ArrayList<CompletableFuture<CompletedFileDownload>> retryFutures = new ArrayList<>(failedTransfers.size());\r\n        failedTransfers.forEach(transfer -> {\r\n            CompletableFuture<CompletedFileDownload> retryFuture = downloadFile(transfer.request());\r\n            retryFutures.add(retryFuture);\r\n        });\r\n        CompletableFuture.allOf(retryFutures.toArray(new CompletableFuture[0])).join();\r\n    }\r\n    return path;\r\n}\r\n\r\npublic CompletableFuture<CompletedDirectoryDownload> downloadDirectory(String bucket, String key, Path destination) {\r\n    DownloadDirectoryRequest request = DownloadDirectoryRequest.builder()\r\n            .destination(destination)\r\n            .bucket(bucket)\r\n            .listObjectsV2RequestTransformer(l -> l.prefix(key))\r\n            .build();\r\n    return s3TransferManager.downloadDirectory(request).completionFuture();\r\n}\r\n\r\npublic CompletableFuture<CompletedFileDownload> downloadFile(DownloadFileRequest request) {\r\n    return s3TransferManager.downloadFile(request).completionFuture();\r\n}\r\n```\n\n### Possible Solution\n\n_No response_\n\n### Additional Information/Context\n\n_No response_\n\n### AWS Java SDK version used\n\n2.24.13\n\n### JDK version used\n\njava version \"11.0.22\" 2024-01-16 LTS Java(TM) SE Runtime Environment 18.9 (build 11.0.22+9-LTS-219) Java HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.22+9-LTS-219, mixed mode)\n\n### Operating System and version\n\nWindows 10",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4987/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4987/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4949",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4949/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4949/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4949/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/4949",
        "id": 2145150619,
        "node_id": "I_kwDOBa1eV85_3Gab",
        "number": 4949,
        "title": "s3TransferManager is uploading files with Content-Encoding metadata empty",
        "user": {
            "login": "swilsonmelo",
            "id": 34746520,
            "node_id": "MDQ6VXNlcjM0NzQ2NTIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/34746520?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/swilsonmelo",
            "html_url": "https://github.com/swilsonmelo",
            "followers_url": "https://api.github.com/users/swilsonmelo/followers",
            "following_url": "https://api.github.com/users/swilsonmelo/following{/other_user}",
            "gists_url": "https://api.github.com/users/swilsonmelo/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/swilsonmelo/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/swilsonmelo/subscriptions",
            "organizations_url": "https://api.github.com/users/swilsonmelo/orgs",
            "repos_url": "https://api.github.com/users/swilsonmelo/repos",
            "events_url": "https://api.github.com/users/swilsonmelo/events{/privacy}",
            "received_events_url": "https://api.github.com/users/swilsonmelo/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 2020412015,
                "node_id": "MDU6TGFiZWwyMDIwNDEyMDE1",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/closed-for-staleness",
                "name": "closed-for-staleness",
                "color": "eeeeee",
                "default": false,
                "description": ""
            },
            {
                "id": 4731219696,
                "node_id": "LA_kwDOBa1eV88AAAABGgCu8A",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/p2",
                "name": "p2",
                "color": "FF8C00",
                "default": false,
                "description": "This is a standard priority issue"
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "debora-ito",
            "id": 476307,
            "node_id": "MDQ6VXNlcjQ3NjMwNw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/476307?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/debora-ito",
            "html_url": "https://github.com/debora-ito",
            "followers_url": "https://api.github.com/users/debora-ito/followers",
            "following_url": "https://api.github.com/users/debora-ito/following{/other_user}",
            "gists_url": "https://api.github.com/users/debora-ito/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/debora-ito/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/debora-ito/subscriptions",
            "organizations_url": "https://api.github.com/users/debora-ito/orgs",
            "repos_url": "https://api.github.com/users/debora-ito/repos",
            "events_url": "https://api.github.com/users/debora-ito/events{/privacy}",
            "received_events_url": "https://api.github.com/users/debora-ito/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "debora-ito",
                "id": 476307,
                "node_id": "MDQ6VXNlcjQ3NjMwNw==",
                "avatar_url": "https://avatars.githubusercontent.com/u/476307?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/debora-ito",
                "html_url": "https://github.com/debora-ito",
                "followers_url": "https://api.github.com/users/debora-ito/followers",
                "following_url": "https://api.github.com/users/debora-ito/following{/other_user}",
                "gists_url": "https://api.github.com/users/debora-ito/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/debora-ito/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/debora-ito/subscriptions",
                "organizations_url": "https://api.github.com/users/debora-ito/orgs",
                "repos_url": "https://api.github.com/users/debora-ito/repos",
                "events_url": "https://api.github.com/users/debora-ito/events{/privacy}",
                "received_events_url": "https://api.github.com/users/debora-ito/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 2,
        "created_at": "2024-02-20T19:49:41Z",
        "updated_at": "2024-03-02T21:05:02Z",
        "closed_at": "2024-03-02T21:05:02Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\n\ns3TransferManager is uploading files with `Content-Encoding` metadata empty, we are uploading some files to s3 with the crt Async client, and the metadata of the objects in s3 contains the Content-Encoding key with an empty value.\r\n\r\n![image](https://github.com/aws/aws-sdk-java-v2/assets/34746520/20598ed6-416d-4e87-9aaf-308cab1858cb)\r\n\r\nWe are uploading text files and we do not need this `Content-Enconding`\r\n\r\nWe tried setting it to null from the code, but it was still created with an empty value.\n\n### Expected Behavior\n\nObjects in s3 without the key Content-Encoding in metadata\n\n### Current Behavior\n\nObjects in s3 with the key Content-Encoding in metadata\r\n![image](https://github.com/aws/aws-sdk-java-v2/assets/34746520/08b4d38a-e0f4-47cc-a012-b2ff4a631660)\r\n\n\n### Reproduction Steps\n\nDependencies used in the project:\r\n\r\n```\r\n    implementation(platform(\"software.amazon.awssdk:bom:2.20.42\"))\r\n    implementation(\"software.amazon.awssdk:s3:2.20.42\")\r\n    implementation(\"software.amazon.awssdk:s3-transfer-manager:2.20.42\")\r\n    implementation(\"software.amazon.awssdk.crt:aws-crt:0.29.10\"\r\n```\r\n\r\nCode where the s3Client and the s3TransferManager are being instantiated:\r\n```kotlin\r\n    @Bean\r\n    fun S3AsyncClient(s3Properties: S3Properties): S3AsyncClient =\r\n        S3AsyncClient.crtBuilder()\r\n            .region(Region.of(s3Properties.region))\r\n            .targetThroughputInGbps(s3Properties.targetThroughputInGbps)\r\n            .minimumPartSizeInBytes(s3Properties.minimumPartSizeInMegaBytes * MB)\r\n            .build()\r\n\r\n    @Bean\r\n    fun S3TransferManager(s3AsyncClient: S3AsyncClient): S3TransferManager =\r\n        S3TransferManager.builder()\r\n            .s3Client(s3AsyncClient)\r\n            .build()\r\n```\r\n\r\nCode that we are using to upload a directory to s3:\r\n\r\n```kotlin\r\noverride fun uploadDirectoryAsync(destinationFolder: String, directory: Path): CompletableFuture<URI> {\r\n        val directoryUpload = s3TransferManager.uploadDirectory(\r\n            UploadDirectoryRequest.builder()\r\n                .source(directory)\r\n                .bucket(s3Properties.recordingsBucketName)\r\n                .s3Prefix(destinationFolder)\r\n                .build()\r\n\r\n        )\r\n        val directoryUriParameters = mapOf(\"bucket\" to s3Properties.recordingsBucketName, \"path\" to destinationFolder)\r\n        return directoryUpload.completionFuture().thenApply { uriTemplate.expand(directoryUriParameters) }\r\n    }\r\n```\r\n   \n\n### Possible Solution\n\n_No response_\n\n### Additional Information/Context\n\n_No response_\n\n### AWS Java SDK version used\n\nimplementation(platform(\"software.amazon.awssdk:bom:2.20.42\")) implementation(\"software.amazon.awssdk:s3:2.20.42\") implementation(\"software.amazon.awssdk:s3-transfer-manager:2.20.42\") implementation(\"software.amazon.awssdk.crt:aws-crt:0.29.10\")\n\n### JDK version used\n\njava 21\n\n### Operating System and version\n\nAmazon linux 2 and running locally in MAC OS Sonoma 14.2.1",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4949/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4949/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4924",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4924/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4924/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4924/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/4924",
        "id": 2132776732,
        "node_id": "I_kwDOBa1eV85_H5cc",
        "number": 4924,
        "title": "IotDataPlaneException: Forbidden exception when trying to publish to a topic with IotDataPlaneClient and CRT sync client",
        "user": {
            "login": "statelessness",
            "id": 1770118,
            "node_id": "MDQ6VXNlcjE3NzAxMTg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1770118?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/statelessness",
            "html_url": "https://github.com/statelessness",
            "followers_url": "https://api.github.com/users/statelessness/followers",
            "following_url": "https://api.github.com/users/statelessness/following{/other_user}",
            "gists_url": "https://api.github.com/users/statelessness/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/statelessness/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/statelessness/subscriptions",
            "organizations_url": "https://api.github.com/users/statelessness/orgs",
            "repos_url": "https://api.github.com/users/statelessness/repos",
            "events_url": "https://api.github.com/users/statelessness/events{/privacy}",
            "received_events_url": "https://api.github.com/users/statelessness/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 4731219696,
                "node_id": "LA_kwDOBa1eV88AAAABGgCu8A",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/p2",
                "name": "p2",
                "color": "FF8C00",
                "default": false,
                "description": "This is a standard priority issue"
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "debora-ito",
            "id": 476307,
            "node_id": "MDQ6VXNlcjQ3NjMwNw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/476307?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/debora-ito",
            "html_url": "https://github.com/debora-ito",
            "followers_url": "https://api.github.com/users/debora-ito/followers",
            "following_url": "https://api.github.com/users/debora-ito/following{/other_user}",
            "gists_url": "https://api.github.com/users/debora-ito/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/debora-ito/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/debora-ito/subscriptions",
            "organizations_url": "https://api.github.com/users/debora-ito/orgs",
            "repos_url": "https://api.github.com/users/debora-ito/repos",
            "events_url": "https://api.github.com/users/debora-ito/events{/privacy}",
            "received_events_url": "https://api.github.com/users/debora-ito/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "debora-ito",
                "id": 476307,
                "node_id": "MDQ6VXNlcjQ3NjMwNw==",
                "avatar_url": "https://avatars.githubusercontent.com/u/476307?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/debora-ito",
                "html_url": "https://github.com/debora-ito",
                "followers_url": "https://api.github.com/users/debora-ito/followers",
                "following_url": "https://api.github.com/users/debora-ito/following{/other_user}",
                "gists_url": "https://api.github.com/users/debora-ito/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/debora-ito/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/debora-ito/subscriptions",
                "organizations_url": "https://api.github.com/users/debora-ito/orgs",
                "repos_url": "https://api.github.com/users/debora-ito/repos",
                "events_url": "https://api.github.com/users/debora-ito/events{/privacy}",
                "received_events_url": "https://api.github.com/users/debora-ito/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 5,
        "created_at": "2024-02-13T16:59:04Z",
        "updated_at": "2024-02-26T17:19:42Z",
        "closed_at": "2024-02-26T17:19:26Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\n\nI've refactored my sdk clients in an AWS Lambda to use a single instance of CRT sync client. When trying to publish with IotDataPlaneClient to an IoT Core topic (same account and same region than the lambda), I get a Forbidden error. If I  replace the http client with a different one, UrlConnection for example, the lambda can publish to the topic. So I think that the problem has nothing to do with lambda iam permissions. I've tried to assign the iot endpoint too but without luck.\n\n### Expected Behavior\n\nThe expected behaviour is that IotDataPlaneClient can work with CRT sync client.\n\n### Current Behavior\n\nForbidden (Service: IotDataPlane, Status Code: 403, Request ID: 79bbcf66-6692-ccbc-8dce-15d70c494213): software.amazon.awssdk.services.iotdataplane.model.IotDataPlaneException\r\nsoftware.amazon.awssdk.services.iotdataplane.model.IotDataPlaneException: Forbidden (Service: IotDataPlane, Status Code: 403, Request ID: 79bbcf66-6692-ccbc-8dce-15d70c494213)\r\n\tat software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handleErrorResponse(CombinedResponseHandler.java:125)\r\n\tat software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handleResponse(CombinedResponseHandler.java:82)\r\n\tat software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handle(CombinedResponseHandler.java:60)\r\n\tat software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handle(CombinedResponseHandler.java:41)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.HandleResponseStage.execute(HandleResponseStage.java:50)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.HandleResponseStage.execute(HandleResponseStage.java:38)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:72)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:42)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:78)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:40)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:55)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:39)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage.execute(RetryableStage.java:81)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage.execute(RetryableStage.java:36)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n\tat software.amazon.awssdk.core.internal.http.StreamManagingStage.execute(StreamManagingStage.java:56)\r\n\tat software.amazon.awssdk.core.internal.http.StreamManagingStage.execute(StreamManagingStage.java:36)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.executeWithTimer(ApiCallTimeoutTrackingStage.java:80)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.execute(ApiCallTimeoutTrackingStage.java:60)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.execute(ApiCallTimeoutTrackingStage.java:42)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallMetricCollectionStage.execute(ApiCallMetricCollectionStage.java:50)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallMetricCollectionStage.execute(ApiCallMetricCollectionStage.java:32)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ExecutionFailureExceptionReportingStage.execute(ExecutionFailureExceptionReportingStage.java:37)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ExecutionFailureExceptionReportingStage.execute(ExecutionFailureExceptionReportingStage.java:26)\r\n\tat software.amazon.awssdk.core.internal.http.AmazonSyncHttpClient$RequestExecutionBuilderImpl.execute(AmazonSyncHttpClient.java:224)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.invoke(BaseSyncClientHandler.java:103)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.doExecute(BaseSyncClientHandler.java:173)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.lambda$execute$1(BaseSyncClientHandler.java:80)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.measureApiCallSuccess(BaseSyncClientHandler.java:182)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.execute(BaseSyncClientHandler.java:74)\r\n\tat software.amazon.awssdk.core.client.handler.SdkSyncClientHandler.execute(SdkSyncClientHandler.java:45)\r\n\tat software.amazon.awssdk.awscore.client.handler.AwsSyncClientHandler.execute(AwsSyncClientHandler.java:53)\r\n\tat software.amazon.awssdk.services.iotdataplane.DefaultIotDataPlaneClient.publish(DefaultIotDataPlaneClient.java:558)\r\n\tat cloud.plexo.akron.erp.common.task.worker.processor.AbstractEventProcessor.publish(AbstractEventProcessor.java:175)\r\n\tat cloud.plexo.akron.erp.common.task.worker.processor.AbstractEventProcessor.process(AbstractEventProcessor.java:70)\r\n\tat cloud.plexo.akron.erp.common.task.worker.processor.SQSEventProcessor.lambda$process$1(SQSEventProcessor.java:47)\r\n\tat java.base/java.util.Optional.ifPresent(Unknown Source)\r\n\tat cloud.plexo.akron.erp.common.task.worker.processor.SQSEventProcessor.lambda$process$2(SQSEventProcessor.java:46)\r\n\tat java.base/java.util.ArrayList.forEach(Unknown Source)\r\n\tat cloud.plexo.akron.erp.common.task.worker.processor.SQSEventProcessor.process(SQSEventProcessor.java:41)\r\n\tat org.springframework.cloud.function.context.catalog.SimpleFunctionRegistry$FunctionInvocationWrapper.invokeConsumer(SimpleFunctionRegistry.java:1039)\r\n\tat org.springframework.cloud.function.context.catalog.SimpleFunctionRegistry$FunctionInvocationWrapper.doApply(SimpleFunctionRegistry.java:737)\r\n\tat org.springframework.cloud.function.context.catalog.SimpleFunctionRegistry$FunctionInvocationWrapper.apply(SimpleFunctionRegistry.java:580)\r\n\tat org.springframework.cloud.function.adapter.aws.FunctionInvoker.handleRequest(FunctionInvoker.java:91)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\r\n\r\n\n\n### Reproduction Steps\n\n@Configuration\r\npublic class CommonAmazonConfig {\r\n\r\n    @Bean\r\n    IotDataPlaneClient provideIotDataPlaneClient(final SdkHttpClient sdkHttpClient) {\r\n        return IotDataPlaneClient.builder()\r\n                                 .defaultsMode(DefaultsMode.IN_REGION)\r\n                                 .httpClient(sdkHttpClient)\r\n                                 .region(Region.of(System.getenv(\"AWS_REGION\")))\r\n                                 .build();\r\n    }\r\n\r\n    @Bean\r\n    S3Client provideS3Client(final SdkHttpClient sdkHttpClient) {\r\n        return S3Client.builder()\r\n                       .defaultsMode(DefaultsMode.IN_REGION)\r\n                       .httpClient(sdkHttpClient)\r\n                       .region(Region.of(System.getenv(\"AWS_REGION\")))\r\n                       .build();\r\n    }\r\n\r\n    @Bean\r\n    SdkHttpClient provideSdkHttpClient() {\r\n        return AwsCrtHttpClient.builder().build();\r\n    }\r\n}\r\n\r\nThis is the part of my pom file configuring CRT stuff (CRT version is 0.29.9):\r\n\r\n        <dependency>\r\n            <groupId>software.amazon.awssdk</groupId>\r\n            <artifactId>iotdataplane</artifactId>\r\n            <exclusions>\r\n                <exclusion>\r\n                    <groupId>software.amazon.awssdk</groupId>\r\n                    <artifactId>netty-nio-client</artifactId>\r\n                </exclusion>\r\n                <exclusion>\r\n                    <groupId>software.amazon.awssdk</groupId>\r\n                    <artifactId>apache-client</artifactId>\r\n                </exclusion>\r\n            </exclusions>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>software.amazon.awssdk</groupId>\r\n            <artifactId>s3</artifactId>\r\n            <exclusions>\r\n                <exclusion>\r\n                    <groupId>software.amazon.awssdk</groupId>\r\n                    <artifactId>netty-nio-client</artifactId>\r\n                </exclusion>\r\n                <exclusion>\r\n                    <groupId>software.amazon.awssdk</groupId>\r\n                    <artifactId>apache-client</artifactId>\r\n                </exclusion>\r\n            </exclusions>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>software.amazon.awssdk</groupId>\r\n            <artifactId>aws-crt-client</artifactId>\r\n            <exclusions>\r\n                <exclusion>\r\n                    <groupId>software.amazon.awssdk.crt</groupId>\r\n                    <artifactId>aws-crt</artifactId>\r\n                </exclusion>\r\n            </exclusions>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>software.amazon.awssdk.crt</groupId>\r\n            <artifactId>aws-crt</artifactId>\r\n            <classifier>linux-x86_64</classifier>\r\n        </dependency>\n\n### Possible Solution\n\n_No response_\n\n### Additional Information/Context\n\nThe lambda is a Spring Cloud function, which is using IotDataPlaneClient and S3Client. The workflow is processing a file from S3 and publishing a message to IoT Core topic after. The S3 client works fine and  does its job, but the IotDataPlaneClient fails with error mentioned previously.\n\n### AWS Java SDK version used\n\n2.24.0\n\n### JDK version used\n\nJava17\n\n### Operating System and version\n\nAWS Lambda Java17 X86_64 architecture with snapstart enabled",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4924/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4924/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4916",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4916/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4916/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4916/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/4916",
        "id": 2127970273,
        "node_id": "I_kwDOBa1eV85-1j_h",
        "number": 4916,
        "title": "Structure Of Presigned S3 URLS Changed. ",
        "user": {
            "login": "GEverding",
            "id": 1377740,
            "node_id": "MDQ6VXNlcjEzNzc3NDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1377740?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/GEverding",
            "html_url": "https://github.com/GEverding",
            "followers_url": "https://api.github.com/users/GEverding/followers",
            "following_url": "https://api.github.com/users/GEverding/following{/other_user}",
            "gists_url": "https://api.github.com/users/GEverding/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/GEverding/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/GEverding/subscriptions",
            "organizations_url": "https://api.github.com/users/GEverding/orgs",
            "repos_url": "https://api.github.com/users/GEverding/repos",
            "events_url": "https://api.github.com/users/GEverding/events{/privacy}",
            "received_events_url": "https://api.github.com/users/GEverding/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 1326720995,
                "node_id": "MDU6TGFiZWwxMzI2NzIwOTk1",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/response-requested",
                "name": "response-requested",
                "color": "666666",
                "default": false,
                "description": "Waiting on additional info and feedback. Will move to \"closing-soon\" in 10 days."
            },
            {
                "id": 2020412015,
                "node_id": "MDU6TGFiZWwyMDIwNDEyMDE1",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/closed-for-staleness",
                "name": "closed-for-staleness",
                "color": "eeeeee",
                "default": false,
                "description": ""
            },
            {
                "id": 4731221357,
                "node_id": "LA_kwDOBa1eV88AAAABGgC1bQ",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/p3",
                "name": "p3",
                "color": "F5DEB3",
                "default": false,
                "description": "This is a minor priority issue"
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "debora-ito",
            "id": 476307,
            "node_id": "MDQ6VXNlcjQ3NjMwNw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/476307?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/debora-ito",
            "html_url": "https://github.com/debora-ito",
            "followers_url": "https://api.github.com/users/debora-ito/followers",
            "following_url": "https://api.github.com/users/debora-ito/following{/other_user}",
            "gists_url": "https://api.github.com/users/debora-ito/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/debora-ito/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/debora-ito/subscriptions",
            "organizations_url": "https://api.github.com/users/debora-ito/orgs",
            "repos_url": "https://api.github.com/users/debora-ito/repos",
            "events_url": "https://api.github.com/users/debora-ito/events{/privacy}",
            "received_events_url": "https://api.github.com/users/debora-ito/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "debora-ito",
                "id": 476307,
                "node_id": "MDQ6VXNlcjQ3NjMwNw==",
                "avatar_url": "https://avatars.githubusercontent.com/u/476307?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/debora-ito",
                "html_url": "https://github.com/debora-ito",
                "followers_url": "https://api.github.com/users/debora-ito/followers",
                "following_url": "https://api.github.com/users/debora-ito/following{/other_user}",
                "gists_url": "https://api.github.com/users/debora-ito/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/debora-ito/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/debora-ito/subscriptions",
                "organizations_url": "https://api.github.com/users/debora-ito/orgs",
                "repos_url": "https://api.github.com/users/debora-ito/repos",
                "events_url": "https://api.github.com/users/debora-ito/events{/privacy}",
                "received_events_url": "https://api.github.com/users/debora-ito/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 6,
        "created_at": "2024-02-09T23:18:39Z",
        "updated_at": "2024-02-27T06:06:17Z",
        "closed_at": "2024-02-27T06:06:17Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\n\nSome point between 2.17 and 2.23 the format of presigned s3 changed. The new urls have the bucket in the hostname the old version of the sdk has it as a url path. In particular this breaks OCI S3 Compat layer. I don't know if _both_ are valid and if they are should we be able to choose which structure to use? I also don't know if this is just a OCI issue and I need to get them to fix it. \n\n### Expected Behavior\n\nI want a way of choosing the structure of presigned urls. Either the bucket in the hostname or bucket in the url path. \n\n### Current Behavior\n\nThe sdk always generates it as https://bucket.{endpoint}/file it used to be https://{endpoint}/{bucket}/{file}\n\n### Reproduction Steps\n\nGenerate normal presigned url. \n\n### Possible Solution\n\n_No response_\n\n### Additional Information/Context\n\n_No response_\n\n### AWS Java SDK version used\n\n2.17.x\n\n### JDK version used\n\nopenjdk version \"21\" 2023-09-19 LTS\n\n### Operating System and version\n\nLinux",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4916/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4916/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4912",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4912/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4912/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4912/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/4912",
        "id": 2127709184,
        "node_id": "I_kwDOBa1eV85-0kQA",
        "number": 4912,
        "title": "Cross Region S3 Access using AWS_GLOBAL Endpoint No Longer Works",
        "user": {
            "login": "jjathman",
            "id": 6406,
            "node_id": "MDQ6VXNlcjY0MDY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6406?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jjathman",
            "html_url": "https://github.com/jjathman",
            "followers_url": "https://api.github.com/users/jjathman/followers",
            "following_url": "https://api.github.com/users/jjathman/following{/other_user}",
            "gists_url": "https://api.github.com/users/jjathman/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jjathman/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jjathman/subscriptions",
            "organizations_url": "https://api.github.com/users/jjathman/orgs",
            "repos_url": "https://api.github.com/users/jjathman/repos",
            "events_url": "https://api.github.com/users/jjathman/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jjathman/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 2020412015,
                "node_id": "MDU6TGFiZWwyMDIwNDEyMDE1",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/closed-for-staleness",
                "name": "closed-for-staleness",
                "color": "eeeeee",
                "default": false,
                "description": ""
            },
            {
                "id": 4731218196,
                "node_id": "LA_kwDOBa1eV88AAAABGgCpFA",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/p1",
                "name": "p1",
                "color": "FF4500",
                "default": false,
                "description": "This is a high priority issue"
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "debora-ito",
            "id": 476307,
            "node_id": "MDQ6VXNlcjQ3NjMwNw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/476307?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/debora-ito",
            "html_url": "https://github.com/debora-ito",
            "followers_url": "https://api.github.com/users/debora-ito/followers",
            "following_url": "https://api.github.com/users/debora-ito/following{/other_user}",
            "gists_url": "https://api.github.com/users/debora-ito/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/debora-ito/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/debora-ito/subscriptions",
            "organizations_url": "https://api.github.com/users/debora-ito/orgs",
            "repos_url": "https://api.github.com/users/debora-ito/repos",
            "events_url": "https://api.github.com/users/debora-ito/events{/privacy}",
            "received_events_url": "https://api.github.com/users/debora-ito/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "debora-ito",
                "id": 476307,
                "node_id": "MDQ6VXNlcjQ3NjMwNw==",
                "avatar_url": "https://avatars.githubusercontent.com/u/476307?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/debora-ito",
                "html_url": "https://github.com/debora-ito",
                "followers_url": "https://api.github.com/users/debora-ito/followers",
                "following_url": "https://api.github.com/users/debora-ito/following{/other_user}",
                "gists_url": "https://api.github.com/users/debora-ito/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/debora-ito/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/debora-ito/subscriptions",
                "organizations_url": "https://api.github.com/users/debora-ito/orgs",
                "repos_url": "https://api.github.com/users/debora-ito/repos",
                "events_url": "https://api.github.com/users/debora-ito/events{/privacy}",
                "received_events_url": "https://api.github.com/users/debora-ito/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 2,
        "created_at": "2024-02-09T19:10:49Z",
        "updated_at": "2024-02-19T21:05:33Z",
        "closed_at": "2024-02-19T21:05:33Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\n\nI believe due to the change done for #4720, if a client is configured using the AWS_GLOBAL region and cross region access is enabled, a PUT to any region that is not US-EAST1 will now fail with an authorization error. This broke with BOM version 2.23.13.\n\n### Expected Behavior\n\nThis client configuration:\r\n\r\n```\r\n        S3AsyncClient.builder()\r\n                .region(AWS_GLOBAL)\r\n                .credentialsProvider(credentialsProvider)\r\n                .crossRegionAccessEnabled(true)\r\n                .build();\r\n```\r\n\r\nshould be able to write to a bucket in any region. This worked prior to BOM version 2.23.13.\n\n### Current Behavior\n\nThe put will fail with an error like this:\r\n\r\n```\r\nThe authorization header is malformed; the region 'us-east-1' is wrong; expecting 'us-east-2' (Service: S3, Status Code: 400, Request ID: ABC, Extended Request ID: ABC123)\r\nsoftware.amazon.awssdk.services.s3.model.S3Exception: The authorization header is malformed; the region 'us-east-1' is wrong; expecting 'us-east-2' (Service: S3, Status Code: 400, Request ID: ABC, Extended Request ID: ABC123)\r\n\tat software.amazon.awssdk.protocols.xml.internal.unmarshall.AwsXmlPredicatedResponseHandler.handleErrorResponse(AwsXmlPredicatedResponseHandler.java:156)\r\n\tat software.amazon.awssdk.protocols.xml.internal.unmarshall.AwsXmlPredicatedResponseHandler.handleResponse(AwsXmlPredicatedResponseHandler.java:108)\r\n\tat software.amazon.awssdk.protocols.xml.internal.unmarshall.AwsXmlPredicatedResponseHandler.handle(AwsXmlPredicatedResponseHandler.java:85)\r\n\tat software.amazon.awssdk.protocols.xml.internal.unmarshall.AwsXmlPredicatedResponseHandler.handle(AwsXmlPredicatedResponseHandler.java:43)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseClientHandler.lambda$successTransformationResponseHandler$7(BaseClientHandler.java:279)\r\n\tat software.amazon.awssdk.core.internal.http.async.AsyncResponseHandler.lambda$prepare$0(AsyncResponseHandler.java:92)\r\n```\n\n### Reproduction Steps\n\nCreate a client as shown above using the current version of the SDK.\n\n### Possible Solution\n\nUsing `US-EAST1` as the region instead of `AWS_GLOBAL` does also fix the problem, but this is a change in behavior that does not seem intended.\n\n### Additional Information/Context\n\n_No response_\n\n### AWS Java SDK version used\n\n2.23.21\n\n### JDK version used\n\nJava 17\n\n### Operating System and version\n\nmacOS 14",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4912/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4912/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4894",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4894/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4894/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4894/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/4894",
        "id": 2120386044,
        "node_id": "I_kwDOBa1eV85-YoX8",
        "number": 4894,
        "title": " software.amazon.awssdk.core.exception.SdkClientException: Unable to execute HTTP request: Write timed out(short issue description)",
        "user": {
            "login": "mubasherhussain9d",
            "id": 139957020,
            "node_id": "U_kgDOCFeTHA",
            "avatar_url": "https://avatars.githubusercontent.com/u/139957020?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mubasherhussain9d",
            "html_url": "https://github.com/mubasherhussain9d",
            "followers_url": "https://api.github.com/users/mubasherhussain9d/followers",
            "following_url": "https://api.github.com/users/mubasherhussain9d/following{/other_user}",
            "gists_url": "https://api.github.com/users/mubasherhussain9d/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mubasherhussain9d/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mubasherhussain9d/subscriptions",
            "organizations_url": "https://api.github.com/users/mubasherhussain9d/orgs",
            "repos_url": "https://api.github.com/users/mubasherhussain9d/repos",
            "events_url": "https://api.github.com/users/mubasherhussain9d/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mubasherhussain9d/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 2020412015,
                "node_id": "MDU6TGFiZWwyMDIwNDEyMDE1",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/closed-for-staleness",
                "name": "closed-for-staleness",
                "color": "eeeeee",
                "default": false,
                "description": ""
            },
            {
                "id": 4731221357,
                "node_id": "LA_kwDOBa1eV88AAAABGgC1bQ",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/p3",
                "name": "p3",
                "color": "F5DEB3",
                "default": false,
                "description": "This is a minor priority issue"
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "debora-ito",
            "id": 476307,
            "node_id": "MDQ6VXNlcjQ3NjMwNw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/476307?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/debora-ito",
            "html_url": "https://github.com/debora-ito",
            "followers_url": "https://api.github.com/users/debora-ito/followers",
            "following_url": "https://api.github.com/users/debora-ito/following{/other_user}",
            "gists_url": "https://api.github.com/users/debora-ito/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/debora-ito/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/debora-ito/subscriptions",
            "organizations_url": "https://api.github.com/users/debora-ito/orgs",
            "repos_url": "https://api.github.com/users/debora-ito/repos",
            "events_url": "https://api.github.com/users/debora-ito/events{/privacy}",
            "received_events_url": "https://api.github.com/users/debora-ito/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "debora-ito",
                "id": 476307,
                "node_id": "MDQ6VXNlcjQ3NjMwNw==",
                "avatar_url": "https://avatars.githubusercontent.com/u/476307?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/debora-ito",
                "html_url": "https://github.com/debora-ito",
                "followers_url": "https://api.github.com/users/debora-ito/followers",
                "following_url": "https://api.github.com/users/debora-ito/following{/other_user}",
                "gists_url": "https://api.github.com/users/debora-ito/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/debora-ito/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/debora-ito/subscriptions",
                "organizations_url": "https://api.github.com/users/debora-ito/orgs",
                "repos_url": "https://api.github.com/users/debora-ito/repos",
                "events_url": "https://api.github.com/users/debora-ito/events{/privacy}",
                "received_events_url": "https://api.github.com/users/debora-ito/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 3,
        "created_at": "2024-02-06T09:59:48Z",
        "updated_at": "2024-02-19T00:20:31Z",
        "closed_at": "2024-02-19T00:20:31Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the bug\n\nwhen i upload the small file upto the 8MB it uploads in the bucket correctly but when i upload a little bit large file it throws an exception  software.amazon.awssdk.core.exception.SdkClientException: Unable to execute HTTP request: Write timed out.\r\ni am using S3TransferManager with S3AsyncClient if i give the writeTimeout(Duration.ofMinutes(1)) inside NettyNioAsyncHttpClient  then it upload file of size upto 20MB but this is not the proper solution what if user connect with slow internet large file in GBs????\r\n\r\n` val s3Client = S3AsyncClient.builder()\r\n            .region(Constants.REGION)\r\n//            .httpClient(\r\n//                NettyNioAsyncHttpClient.builder()\r\n//                    .connectionTimeToLive(Duration.ofMinutes(8))\r\n////                    .readTimeout(Duration.ofMinutes(1))\r\n//                    .writeTimeout(Duration.ofMinutes(4))\r\n////                    .connectionAcquisitionTimeout()\r\n////                    .connectionTimeout(Duration.ofMinutes(1))\r\n//                    .maxConcurrency(64)\r\n//                    .build()\r\n//            )\r\n            .endpointOverride(URI(Constants.ENDPOINT))\r\n            .credentialsProvider(credentials)\r\n            .build()\r\n\r\n        val transferListener = object : TransferListener {\r\n            override fun transferInitiated(context: TransferListener.Context.TransferInitiated?) {\r\n                super.transferInitiated(context)\r\n                Log.e(TAG, \"transferInitiated: total bytes ${humanReadableByteCountSI(context?.progressSnapshot()?.totalBytes()?.asLong!!)}\")\r\n            }\r\n\r\n            override fun bytesTransferred(context: TransferListener.Context.BytesTransferred?) {\r\n                super.bytesTransferred(context)\r\n                Log.e(TAG, \"bytesTransferred: ${humanReadableByteCountSI(context?.progressSnapshot()?.transferredBytes()!!)} | ${humanReadableByteCountSI(context.progressSnapshot()?.remainingBytes()?.asLong!!)}\")\r\n            }\r\n\r\n            override fun transferComplete(context: TransferListener.Context.TransferComplete?) {\r\n                super.transferComplete(context)\r\n                Log.e(TAG, \"transferComplete: \")\r\n                binding.mcvProgress.hide()\r\n                requireActivity().showToast(\"true\")\r\n            }\r\n\r\n            override fun transferFailed(context: TransferListener.Context.TransferFailed?) {\r\n                super.transferFailed(context)\r\n                Log.e(TAG, \"transferFailed: ${context?.exception()}\")\r\n                binding.mcvProgress.hide()\r\n                requireActivity().showToast(\"Error\")\r\n            }\r\n        }\r\n\r\n        val transferManager = S3TransferManager\r\n            .builder()\r\n            .s3Client(s3Client)\r\n            .build()\r\n        val putObjectRequest: PutObjectRequest = PutObjectRequest\r\n            .builder()\r\n            .bucket(pref.bucketName)\r\n            .key(file.name)\r\n//            .contentLength(file.length())\r\n            .build()\r\n\r\n        val uploadFileRequest: UploadFileRequest = UploadFileRequest\r\n            .builder()\r\n            .source(file)\r\n            .putObjectRequest(putObjectRequest)\r\n            .addTransferListener(transferListener)\r\n            .build()\r\n\r\n        transferManager\r\n            .uploadFile(uploadFileRequest)\r\n            .completionFuture()\r\n            .whenComplete { _, error ->\r\n                Log.d(\"--upload error\", \":${error.message} \")\r\n            }`\n\n### Expected Behavior\n\nwe are expecting that user can upload any file with any slow kind of internet smoothly ,if there is too much slow internet then it show error that internet is slow.  \n\n### Current Behavior\n\nwe trying to upload a file inside the bucket if file is low in size and internet is in excellent quality then it work proper otherwise it is throwing exception which is mentioned above.\n\n### Reproduction Steps\n\n` val s3Client = S3AsyncClient.builder()\r\n            .region(Constants.REGION)\r\n//            .httpClient(\r\n//                NettyNioAsyncHttpClient.builder()\r\n//                    .connectionTimeToLive(Duration.ofMinutes(8))\r\n////                    .readTimeout(Duration.ofMinutes(1))\r\n//                    .writeTimeout(Duration.ofMinutes(4))\r\n////                    .connectionAcquisitionTimeout()\r\n////                    .connectionTimeout(Duration.ofMinutes(1))\r\n//                    .maxConcurrency(64)\r\n//                    .build()\r\n//            )\r\n            .endpointOverride(URI(Constants.ENDPOINT))\r\n            .credentialsProvider(credentials)\r\n            .build()\r\n\r\n        val transferListener = object : TransferListener {\r\n            override fun transferInitiated(context: TransferListener.Context.TransferInitiated?) {\r\n                super.transferInitiated(context)\r\n                Log.e(TAG, \"transferInitiated: total bytes ${humanReadableByteCountSI(context?.progressSnapshot()?.totalBytes()?.asLong!!)}\")\r\n            }\r\n\r\n            override fun bytesTransferred(context: TransferListener.Context.BytesTransferred?) {\r\n                super.bytesTransferred(context)\r\n                Log.e(TAG, \"bytesTransferred: ${humanReadableByteCountSI(context?.progressSnapshot()?.transferredBytes()!!)} | ${humanReadableByteCountSI(context.progressSnapshot()?.remainingBytes()?.asLong!!)}\")\r\n            }\r\n\r\n            override fun transferComplete(context: TransferListener.Context.TransferComplete?) {\r\n                super.transferComplete(context)\r\n                Log.e(TAG, \"transferComplete: \")\r\n                binding.mcvProgress.hide()\r\n                requireActivity().showToast(\"true\")\r\n            }\r\n\r\n            override fun transferFailed(context: TransferListener.Context.TransferFailed?) {\r\n                super.transferFailed(context)\r\n                Log.e(TAG, \"transferFailed: ${context?.exception()}\")\r\n                binding.mcvProgress.hide()\r\n                requireActivity().showToast(\"Error\")\r\n            }\r\n        }\r\n\r\n        val transferManager = S3TransferManager\r\n            .builder()\r\n            .s3Client(s3Client)\r\n            .build()\r\n        val putObjectRequest: PutObjectRequest = PutObjectRequest\r\n            .builder()\r\n            .bucket(pref.bucketName)\r\n            .key(file.name)\r\n//            .contentLength(file.length())\r\n            .build()\r\n\r\n        val uploadFileRequest: UploadFileRequest = UploadFileRequest\r\n            .builder()\r\n            .source(file)\r\n            .putObjectRequest(putObjectRequest)\r\n            .addTransferListener(transferListener)\r\n            .build()\r\n\r\n        transferManager\r\n            .uploadFile(uploadFileRequest)\r\n            .completionFuture()\r\n            .whenComplete { _, error ->\r\n                Log.d(\"--upload error\", \":${error.message} \")\r\n            }`\n\n### Possible Solution\n\n_No response_\n\n### Additional Information/Context\n\n_No response_\n\n### AWS Java SDK version used\n\nJavaVersion.VERSION_17\n\n### JDK version used\n\n'software.amazon.awssdk:s3:2.20.157'             'software.amazon.awssdk:s3-transfer-manager:2.20.157'\n\n### Operating System and version\n\non all android versions",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4894/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4894/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4868",
        "repository_url": "https://api.github.com/repos/aws/aws-sdk-java-v2",
        "labels_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4868/labels{/name}",
        "comments_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4868/comments",
        "events_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4868/events",
        "html_url": "https://github.com/aws/aws-sdk-java-v2/issues/4868",
        "id": 2110230139,
        "node_id": "I_kwDOBa1eV859x457",
        "number": 4868,
        "title": "Package IMDS in bundle.jar",
        "user": {
            "login": "HarshitGupta11",
            "id": 50410275,
            "node_id": "MDQ6VXNlcjUwNDEwMjc1",
            "avatar_url": "https://avatars.githubusercontent.com/u/50410275?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/HarshitGupta11",
            "html_url": "https://github.com/HarshitGupta11",
            "followers_url": "https://api.github.com/users/HarshitGupta11/followers",
            "following_url": "https://api.github.com/users/HarshitGupta11/following{/other_user}",
            "gists_url": "https://api.github.com/users/HarshitGupta11/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/HarshitGupta11/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/HarshitGupta11/subscriptions",
            "organizations_url": "https://api.github.com/users/HarshitGupta11/orgs",
            "repos_url": "https://api.github.com/users/HarshitGupta11/repos",
            "events_url": "https://api.github.com/users/HarshitGupta11/events{/privacy}",
            "received_events_url": "https://api.github.com/users/HarshitGupta11/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 636336329,
                "node_id": "MDU6TGFiZWw2MzYzMzYzMjk=",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "This issue is a bug."
            },
            {
                "id": 4731219696,
                "node_id": "LA_kwDOBa1eV88AAAABGgCu8A",
                "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/labels/p2",
                "name": "p2",
                "color": "FF8C00",
                "default": false,
                "description": "This is a standard priority issue"
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 3,
        "created_at": "2024-01-31T14:31:50Z",
        "updated_at": "2024-02-06T00:28:28Z",
        "closed_at": "2024-02-06T00:28:09Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Describe the feature\n\nCurrently imds is a separate package and it would be nice to package it inside the bundle.jar. It depends upon aws sdk and the major issue being that some libraries in the bundle are shaded but they are not shaded in imds package leading to Method/ClassNotFoundErrors.\n\n### Use Case\n\nIt depends upon aws sdk and the major issue being that some libraries in the bundle are shaded but they are not shaded in imds package leading to Method/ClassNotFoundErrors.\n\n### Proposed Solution\n\n_No response_\n\n### Other Information\n\n_No response_\n\n### Acknowledgements\n\n- [ ] I may be able to implement this feature request\n- [ ] This feature might incur a breaking change\n\n### AWS Java SDK version used\n\n2.23.5\n\n### JDK version used\n\n1.8\n\n### Operating System and version\n\nMac OS X",
        "reactions": {
            "url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4868/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/aws/aws-sdk-java-v2/issues/4868/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    }
]